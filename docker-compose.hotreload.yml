# HiFate-bazi 热更新 Volume 挂载配置
# 用途：将宿主机代码目录挂载到容器，使 git pull 后热更新能检测到变化（无需 docker cp）
# 使用方式（生产）：
#   docker-compose -f docker-compose.yml -f docker-compose.prod.yml -f docker-compose.hotreload.yml up -d
# 使用方式（本地/测试）：
#   docker-compose -f docker-compose.yml -f docker-compose.hotreload.yml up -d
#
# 说明：挂载为只读 (:ro)，容器内不可写，符合生产只读要求；宿主机 git pull 后容器内即见新代码。

services:
  web:
    volumes:
      - ./server:/app/server:ro
      - ./src:/app/src:ro
      - ./services:/app/services:ro
      - ./core:/app/core:ro

  bazi-analyzer:
    volumes:
      - ./server:/app/server:ro
      - ./src:/app/src:ro
      - ./services:/app/services:ro
      - ./core:/app/core:ro

  fortune-analyzer:
    volumes:
      - ./server:/app/server:ro
      - ./src:/app/src:ro
      - ./services:/app/services:ro
      - ./core:/app/core:ro

  rule-service:
    volumes:
      - ./server:/app/server:ro
      - ./src:/app/src:ro
      - ./services:/app/services:ro
      - ./core:/app/core:ro

  bazi-core:
    volumes:
      - ./server:/app/server:ro
      - ./src:/app/src:ro
      - ./services:/app/services:ro
      - ./core:/app/core:ro

  bazi-fortune:
    volumes:
      - ./server:/app/server:ro
      - ./src:/app/src:ro
      - ./services:/app/services:ro
      - ./core:/app/core:ro

  payment-service:
    volumes:
      - ./server:/app/server:ro
      - ./src:/app/src:ro
      - ./services:/app/services:ro
      - ./core:/app/core:ro

  fortune-rule:
    volumes:
      - ./server:/app/server:ro
      - ./src:/app/src:ro
      - ./services:/app/services:ro
      - ./core:/app/core:ro

  intent-service:
    volumes:
      - ./server:/app/server:ro
      - ./src:/app/src:ro
      - ./services:/app/services:ro
      - ./core:/app/core:ro

  prompt-optimizer:
    volumes:
      - ./server:/app/server:ro
      - ./src:/app/src:ro
      - ./services:/app/services:ro
      - ./core:/app/core:ro

  desk-fengshui:
    volumes:
      - ./server:/app/server:ro
      - ./src:/app/src:ro
      - ./services:/app/services:ro
      - ./core:/app/core:ro
