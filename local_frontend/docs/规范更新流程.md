# 前端开发规范更新流程

> **当发现问题或需要改进规范时，按照此流程更新规范。**

## 一、规范更新触发条件

### 1.1 问题复盘触发

- 问题复盘中发现规范缺失或不足
- 根因分析发现规范违反
- 需要新增规范防止同类问题

### 1.2 工具或流程改进触发

- 引入新的工具或技术
- 优化现有流程
- 改进开发体验

### 1.3 代码审查触发

- 代码审查中发现共性问题
- 团队讨论认为需要统一规范

## 二、规范更新流程

```
发现问题/改进需求
    ↓
分析问题根因
    ↓
确定规范更新内容
    ↓
更新规范文档
    ↓
更新检查清单
    ↓
更新开发模板（如有）
    ↓
团队通知（如有团队）
    ↓
记录更新日志
```

## 三、规范更新内容

### 3.1 文档更新

**必须更新的文档**：
- [ ] `docs/开发规范.md` - 核心规范文档
- [ ] `docs/开发检查清单.md` - 检查清单
- [ ] `docs/问题复盘模板.md` - 如有新的复盘项
- [ ] `.cursorrules` - 如有前端相关规范（可选）

### 3.2 工具类更新

**需要更新的工具类**：
- [ ] `js/core/error-handler.js` - 错误处理工具
- [ ] `js/core/dom-utils.js` - DOM操作工具
- [ ] `js/core/validator.js` - 数据验证工具
- [ ] `css/common.css` - 公共样式

### 3.3 示例代码更新

**需要更新的示例**：
- [ ] 规范文档中的示例代码
- [ ] 检查清单中的示例代码
- [ ] 模板文件（如有）

## 四、规范更新模板

### 4.1 规范新增

```markdown
### X.X 新规范名称

**目的**：[说明为什么需要这个规范]

**规范内容**：
[详细说明规范内容]

**示例**：
```javascript
// ✅ 正确示例
[代码示例]

// ❌ 错误示例
[代码示例]
```

**检查清单**：
- [ ] 检查项1
- [ ] 检查项2
```

### 4.2 规范修改

```markdown
### X.X 规范名称（已更新 YYYY-MM-DD）

**修改原因**：[说明为什么修改]

**原规范**：
[原规范内容]

**新规范**：
[新规范内容]

**迁移指南**：
[如何从旧规范迁移到新规范]
```

## 五、更新记录

### 5.1 规范更新日志

在 `docs/开发规范.md` 的"更新记录"章节记录：

```markdown
## 十、更新记录

- 2025-01-XX: [更新内容] - [触发原因/问题编号]
- ...
```

### 5.2 版本控制

- 规范更新提交到 Git
- 提交信息格式：`docs: 更新前端开发规范 - [更新内容]`
- 关联问题复盘（如有）：`docs: 更新前端开发规范 - 修复问题 #[问题编号]`

## 六、通知机制

### 6.1 团队通知（如有团队）

- [ ] 更新团队文档或通知
- [ ] 组织规范学习会议（重大更新）
- [ ] 更新开发指南

### 6.2 自动化检查

- [ ] 更新 Git hooks（如有）
- [ ] 更新 CI/CD 检查（如有）
- [ ] 更新代码审查清单

## 七、规范执行验证

### 7.1 验证方式

- [ ] 检查现有代码是否符合新规范
- [ ] 新代码审查验证规范执行
- [ ] 问题复盘验证规范有效性

### 7.2 持续改进

- [ ] 定期回顾规范执行情况
- [ ] 收集反馈意见
- [ ] 持续优化规范

## 八、常见规范更新场景

### 8.1 错误处理规范更新

**触发**：发现新的错误处理问题模式

**更新内容**：
- 更新 `docs/开发规范.md` 的错误处理章节
- 更新 `ErrorHandler` 工具类（如有新功能）
- 更新检查清单的错误处理项

### 8.2 DOM操作规范更新

**触发**：发现新的DOM操作问题

**更新内容**：
- 更新 `docs/开发规范.md` 的DOM操作章节
- 更新 `DomUtils` 工具类（如有新功能）
- 更新检查清单的DOM操作项

### 8.3 API调用规范更新

**触发**：API调用流程变更或新问题

**更新内容**：
- 更新 `docs/开发规范.md` 的API调用章节
- 更新 `api.js`（如有变更）
- 更新检查清单的API调用项

---

**规范更新原则**：及时、准确、可执行、可验证

