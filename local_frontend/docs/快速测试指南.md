# 工具类快速测试指南

> **本指南说明如何快速测试前端工具类是否正常工作。**

## 一、测试页面

已创建测试页面：`test-tools.html`

### 访问方式

**方式1：直接打开**
```
在浏览器中打开：local_frontend/test-tools.html
```

**方式2：使用本地服务器（推荐，避免CORS问题）**
```bash
cd local_frontend
python3 -m http.server 8080
```
然后在浏览器中访问：`http://localhost:8080/test-tools.html`

## 二、测试内容

### 2.1 ErrorHandler 测试

测试以下功能：
- ✅ 显示错误消息
- ✅ 隐藏错误消息
- ✅ API错误处理（自动友好化错误信息）
- ✅ 显示成功消息

**测试步骤**：
1. 点击"测试显示错误" - 应该看到红色错误消息框
2. 点击"测试隐藏错误" - 错误消息应该消失
3. 点击"测试API错误处理" - 应该显示友好的错误信息
4. 点击"测试显示成功消息" - 应该看到绿色成功消息框（3秒后自动消失）

### 2.2 DomUtils 测试

测试以下功能：
- ✅ 设置元素文本
- ✅ 显示/隐藏元素
- ✅ 设置表单值
- ✅ 获取表单值

**测试步骤**：
1. 点击"测试设置文本" - 测试元素应该显示并更新文本
2. 点击"测试显示/隐藏" - 测试元素应该切换显示/隐藏状态
3. 点击"测试设置表单值" - 输入框应该被填充
4. 点击"测试获取表单值" - 应该显示获取到的值

### 2.3 Validator 测试

测试以下功能：
- ✅ 日期格式验证
- ✅ 时间格式验证
- ✅ 八字输入验证

**测试步骤**：
1. 点击"测试日期验证" - 应该显示验证通过消息
2. 点击"测试时间验证" - 应该显示验证通过消息
3. 点击"测试八字输入验证" - 应该显示验证通过消息

## 三、预期结果

### 3.1 页面加载时

- 控制台应该显示：
  ```
  ✅ 工具类测试页面加载完成
  ✅ ErrorHandler: 已加载
  ✅ DomUtils: 已加载
  ✅ Validator: 已加载
  ```
- 页面顶部应该显示绿色成功消息："所有工具类已成功加载！"（2秒后消失）

### 3.2 功能测试

所有测试按钮点击后应该：
- ✅ 正确执行功能
- ✅ 无JavaScript错误
- ✅ 无控制台警告

## 四、常见问题

### 4.1 工具类未加载

**症状**：控制台显示"未加载"

**可能原因**：
- 文件路径错误
- 文件不存在
- 浏览器控制台有错误

**解决方法**：
1. 检查文件是否存在：
   - `js/core/error-handler.js`
   - `js/core/dom-utils.js`
   - `js/core/validator.js`
2. 检查浏览器控制台的错误信息
3. 检查文件路径是否正确

### 4.2 CORS错误

**症状**：无法加载脚本文件

**解决方法**：
- 使用本地服务器（`python3 -m http.server 8080`）
- 不要直接打开HTML文件

### 4.3 样式未加载

**症状**：错误消息框没有样式

**解决方法**：
- 确保 `css/common.css` 文件存在
- 检查HTML中的样式引入路径

## 五、实际页面测试

### 5.1 desk-fengshui.html 测试

**测试步骤**：
1. 打开 `desk-fengshui.html`
2. 不填写任何信息，直接点击"开始分析"
3. **预期**：应该显示错误消息（使用 ErrorHandler）

4. 上传一张图片，点击"开始分析"
5. **预期**：如果API调用失败，应该显示友好的错误信息

### 5.2 控制台检查

打开浏览器开发者工具（F12），检查：
- ✅ 无JavaScript错误
- ✅ ErrorHandler、DomUtils、Validator 对象存在
- ✅ 错误消息正确显示

## 六、验证清单

测试完成后，确认：

- [ ] 所有工具类文件存在
- [ ] test-tools.html 页面正常加载
- [ ] 所有测试按钮正常工作
- [ ] 无JavaScript错误
- [ ] 错误消息样式正确
- [ ] 成功消息样式正确
- [ ] desk-fengshui.html 正常使用工具类

---

**如果所有测试通过，说明工具类端到端可用！**

