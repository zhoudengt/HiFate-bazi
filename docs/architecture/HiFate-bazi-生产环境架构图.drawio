<mxfile host="app.diagrams.net" modified="2025-01-21T00:00:00.000Z" agent="5.0" version="21.0.0" etag="drawio-architecture" type="device">
  <diagram id="hifate-production-architecture" name="HiFate-bazi 生产环境架构图">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="2339" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- 标题 -->
        <mxCell id="title" value="HiFate-bazi 生产环境双机部署架构图" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="600" y="40" width="600" height="40" as="geometry" />
        </mxCell>
        
        <!-- Node1 容器 -->
        <mxCell id="node1-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FF;strokeColor=#01579B;strokeWidth=2;dashed=0;verticalAlign=top;align=left;spacingLeft=10;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="120" width="1400" height="1000" as="geometry" />
        </mxCell>
        
        <!-- Node1 标题 -->
        <mxCell id="node1-title" value="Node1 (主节点)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="140" width="200" height="30" as="geometry" />
        </mxCell>
        
        <!-- Node1 IP 信息 -->
        <mxCell id="node1-ip" value="公网IP: 8.210.52.217&#xa;内网IP: 172.18.121.222" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="120" y="180" width="250" height="40" as="geometry" />
        </mxCell>
        
        <!-- Node1 Nginx -->
        <mxCell id="node1-nginx" value="Nginx&#xa;负载均衡/反向代理&#xa;端口: 80, 443" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC;strokeColor=#D6B656;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="250" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Node1 Web 服务 -->
        <mxCell id="node1-web" value="Web 服务&#xa;FastAPI&#xa;端口: 8001" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="370" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Node1 MySQL 主库 -->
        <mxCell id="node1-mysql" value="MySQL 主库&#xa;数据库: hifate_bazi&#xa;端口: 3306" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8CECC;strokeColor=#B85450;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="490" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Node1 Redis 主库 -->
        <mxCell id="node1-redis" value="Redis 主库&#xa;缓存服务&#xa;端口: 6379" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="610" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Node1 微服务组 -->
        <mxCell id="node1-microservices" value="微服务集群 (gRPC)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="730" width="200" height="30" as="geometry" />
        </mxCell>
        
        <!-- Node1 微服务列表 -->
        <mxCell id="node1-ms1" value="bazi-core&#xa;9001" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="120" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node1-ms2" value="bazi-fortune&#xa;9002" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="240" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node1-ms3" value="bazi-analyzer&#xa;9003" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="360" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node1-ms4" value="bazi-rule&#xa;9004" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="480" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node1-ms5" value="fortune-analysis&#xa;9005" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="600" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node1-ms6" value="payment-service&#xa;9006" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="720" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node1-ms7" value="fortune-rule&#xa;9007" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="840" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node1-ms8" value="intent-service&#xa;9008" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="960" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node1-ms9" value="prompt-optimizer&#xa;9009" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="1080" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node1-ms10" value="desk-fengshui&#xa;9010" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="1200" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        
        <!-- Node2 容器 -->
        <mxCell id="node2-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC;strokeColor=#D6B656;strokeWidth=2;dashed=0;verticalAlign=top;align=left;spacingLeft=10;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1600" y="120" width="1400" height="1000" as="geometry" />
        </mxCell>
        
        <!-- Node2 标题 -->
        <mxCell id="node2-title" value="Node2 (从节点)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1620" y="140" width="200" height="30" as="geometry" />
        </mxCell>
        
        <!-- Node2 IP 信息 -->
        <mxCell id="node2-ip" value="公网IP: 47.243.160.43&#xa;内网IP: 172.18.121.223" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="1620" y="180" width="250" height="40" as="geometry" />
        </mxCell>
        
        <!-- Node2 Nginx -->
        <mxCell id="node2-nginx" value="Nginx&#xa;负载均衡/反向代理&#xa;端口: 80, 443" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC;strokeColor=#D6B656;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1620" y="250" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Node2 Web 服务 -->
        <mxCell id="node2-web" value="Web 服务&#xa;FastAPI&#xa;端口: 8001" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1620" y="370" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Node2 MySQL 从库 -->
        <mxCell id="node2-mysql" value="MySQL 从库&#xa;只读模式&#xa;端口: 3306" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8CECC;strokeColor=#B85450;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1620" y="490" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Node2 Redis 从库 -->
        <mxCell id="node2-redis" value="Redis 从库&#xa;缓存服务&#xa;端口: 6379" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1620" y="610" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Node2 微服务组 -->
        <mxCell id="node2-microservices" value="微服务集群 (gRPC)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1620" y="730" width="200" height="30" as="geometry" />
        </mxCell>
        
        <!-- Node2 微服务列表 -->
        <mxCell id="node2-ms1" value="bazi-core&#xa;9001" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="1620" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node2-ms2" value="bazi-fortune&#xa;9002" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="1740" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node2-ms3" value="bazi-analyzer&#xa;9003" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="1860" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node2-ms4" value="bazi-rule&#xa;9004" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="1980" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node2-ms5" value="fortune-analysis&#xa;9005" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="2100" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node2-ms6" value="payment-service&#xa;9006" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="2220" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node2-ms7" value="fortune-rule&#xa;9007" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="2340" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node2-ms8" value="intent-service&#xa;9008" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="2460" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node2-ms9" value="prompt-optimizer&#xa;9009" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="2580" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node2-ms10" value="desk-fengshui&#xa;9010" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="2700" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        
        <!-- 用户/客户端 -->
        <mxCell id="user" value="用户/客户端" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#E1F5FF;strokeColor=#01579B" vertex="1" parent="1">
          <mxGeometry x="1450" y="120" width="30" height="60" as="geometry" />
        </mxCell>
        
        <!-- 连接：用户 -> Nginx -->
        <mxCell id="edge-user-nginx1" value="HTTP/HTTPS" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#01579B;endArrow=block;endFill=1" edge="1" parent="1" source="user" target="node1-nginx">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-user-nginx2" value="HTTP/HTTPS" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#01579B;endArrow=block;endFill=1" edge="1" parent="1" source="user" target="node2-nginx">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- 连接：Nginx -> Web -->
        <mxCell id="edge-nginx1-web1" value="负载均衡" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D6B656;endArrow=block;endFill=1" edge="1" parent="1" source="node1-nginx" target="node1-web">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-nginx1-web2" value="负载均衡" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D6B656;endArrow=block;endFill=1;dashed=1" edge="1" parent="1" source="node1-nginx" target="node2-web">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-nginx2-web1" value="负载均衡" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D6B656;endArrow=block;endFill=1;dashed=1" edge="1" parent="1" source="node2-nginx" target="node1-web">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-nginx2-web2" value="负载均衡" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D6B656;endArrow=block;endFill=1" edge="1" parent="1" source="node2-nginx" target="node2-web">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- 连接：Web -> MySQL -->
        <mxCell id="edge-web1-mysql1" value="读写" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#B85450;endArrow=block;endFill=1" edge="1" parent="1" source="node1-web" target="node1-mysql">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-web2-mysql1" value="只读" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#B85450;endArrow=block;endFill=1;dashed=1" edge="1" parent="1" source="node2-web" target="node1-mysql">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-web2-mysql2" value="只读" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#B85450;endArrow=block;endFill=1" edge="1" parent="1" source="node2-web" target="node2-mysql">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- 连接：Web -> Redis -->
        <mxCell id="edge-web1-redis1" value="读写" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#9673A6;endArrow=block;endFill=1" edge="1" parent="1" source="node1-web" target="node1-redis">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-web2-redis1" value="只读" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#9673A6;endArrow=block;endFill=1;dashed=1" edge="1" parent="1" source="node2-web" target="node1-redis">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-web2-redis2" value="只读" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#9673A6;endArrow=block;endFill=1" edge="1" parent="1" source="node2-web" target="node2-redis">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- 连接：Web -> 微服务 -->
        <mxCell id="edge-web1-ms" value="gRPC" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#82B366;endArrow=block;endFill=1" edge="1" parent="1" source="node1-web" target="node1-ms1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-web2-ms" value="gRPC" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#82B366;endArrow=block;endFill=1" edge="1" parent="1" source="node2-web" target="node2-ms1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- MySQL 主从复制连接 -->
        <mxCell id="edge-mysql-replication" value="MySQL 主从复制&#xa;GTID 模式&#xa;172.18.121.222:3306 → 172.18.121.223:3306" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#B85450;endArrow=block;endFill=1;dashed=1;dashPattern=8 8" edge="1" parent="1" source="node1-mysql" target="node2-mysql">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="210" y="530" as="sourcePoint" />
            <mxPoint x="1790" y="530" as="targetPoint" />
            <Array as="points">
              <mxPoint x="300" y="530" />
              <mxPoint x="300" y="400" />
              <mxPoint x="1700" y="400" />
              <mxPoint x="1700" y="530" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- Redis 主从复制连接 -->
        <mxCell id="edge-redis-replication" value="Redis 主从复制&#xa;172.18.121.222:6379 → 172.18.121.223:6379" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#9673A6;endArrow=block;endFill=1;dashed=1;dashPattern=8 8" edge="1" parent="1" source="node1-redis" target="node2-redis">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="210" y="650" as="sourcePoint" />
            <mxPoint x="1790" y="650" as="targetPoint" />
            <Array as="points">
              <mxPoint x="300" y="650" />
              <mxPoint x="300" y="500" />
              <mxPoint x="1700" y="500" />
              <mxPoint x="1700" y="650" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- Nginx 负载均衡连接 -->
        <mxCell id="edge-nginx-lb" value="Nginx 负载均衡&#xa;轮询算法&#xa;故障转移" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D6B656;endArrow=block;endFill=1;dashed=1;dashPattern=4 4" edge="1" parent="1" source="node1-nginx" target="node2-nginx">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="210" y="290" as="sourcePoint" />
            <mxPoint x="1710" y="290" as="targetPoint" />
            <Array as="points">
              <mxPoint x="300" y="290" />
              <mxPoint x="300" y="200" />
              <mxPoint x="1620" y="200" />
              <mxPoint x="1620" y="290" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- 图例 -->
        <mxCell id="legend-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;strokeWidth=1;dashed=0;verticalAlign=top;align=left;spacingLeft=10" vertex="1" parent="1">
          <mxGeometry x="100" y="1160" width="2900" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-title" value="图例说明" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="1180" width="100" height="30" as="geometry" />
        </mxCell>
        
        <!-- 图例项 -->
        <mxCell id="legend-nginx" value="Nginx" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC;strokeColor=#D6B656;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="120" y="1220" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend-web" value="Web 服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="220" y="1220" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend-mysql" value="MySQL" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8CECC;strokeColor=#B85450;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="320" y="1220" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend-redis" value="Redis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="420" y="1220" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend-ms" value="微服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="520" y="1220" width="80" height="30" as="geometry" />
        </mxCell>
        
        <!-- 连接线说明 -->
        <mxCell id="legend-line1" value="───────" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#01579B;endArrow=block;endFill=1" edge="1" parent="1">
          <mxGeometry x="620" y="1235" width="60" height="1" as="geometry" />
        </mxCell>
        <mxCell id="legend-text1" value="用户请求" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="690" y="1220" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-line2" value="───────" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D6B656;endArrow=block;endFill=1" edge="1" parent="1">
          <mxGeometry x="790" y="1235" width="60" height="1" as="geometry" />
        </mxCell>
        <mxCell id="legend-text2" value="负载均衡" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="860" y="1220" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-line3" value="═══════" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#B85450;endArrow=block;endFill=1;dashed=1;dashPattern=8 8" edge="1" parent="1">
          <mxGeometry x="960" y="1235" width="60" height="1" as="geometry" />
        </mxCell>
        <mxCell id="legend-text3" value="主从复制" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="1030" y="1220" width="80" height="30" as="geometry" />
        </mxCell>
        
        <!-- 配置信息 -->
        <mxCell id="config-title" value="关键配置信息" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="1280" width="150" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="config-text" value="• 负载均衡：轮询算法，max_fails=3, fail_timeout=30s&#xa;• MySQL 主从：GTID 模式，用户 repl@%&#xa;• Redis 主从：自动同步&#xa;• 内网通信：使用内网 IP (172.18.121.222/223)&#xa;• 故障转移：自动检测并切换节点" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="120" y="1310" width="600" height="40" as="geometry" />
        </mxCell>
        
        <!-- 访问地址 -->
        <mxCell id="access-title" value="访问地址" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="800" y="1280" width="100" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="access-text" value="• Node1: http://8.210.52.217&#xa;• Node2: http://47.243.160.43&#xa;• 健康检查: /health&#xa;• API 文档: /docs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="800" y="1310" width="300" height="40" as="geometry" />
        </mxCell>
        
        <!-- 测试环境 -->
        <mxCell id="test-env" value="测试环境: 123.57.216.15 (未显示)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="1200" y="1280" width="300" height="30" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

