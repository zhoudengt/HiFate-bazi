# ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿå’Œå®‰å…¨ç®¡ç†ä½¿ç”¨æŒ‡å—

> **åˆ›å»ºæ—¶é—´**ï¼š2025-01-15  
> **ç›®çš„**ï¼šç¡®ä¿æ¯ä¸ªç¯èŠ‚éƒ½æœ‰è¯¦ç»†æ—¥å¿—ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥å’Œè§£å†³

---

## ğŸ“‹ ç›®å½•

- [ä¸€ã€ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ](#ä¸€ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ)
- [äºŒã€æ•æ„Ÿä¿¡æ¯ç®¡ç†](#äºŒæ•æ„Ÿä¿¡æ¯ç®¡ç†)
- [ä¸‰ã€SQL å®‰å…¨é˜²æŠ¤](#ä¸‰sql-å®‰å…¨é˜²æŠ¤)
- [å››ã€ä½¿ç”¨ç¤ºä¾‹](#å››ä½¿ç”¨ç¤ºä¾‹)
- [äº”ã€è¿ç§»æŒ‡å—](#äº”è¿ç§»æŒ‡å—)

---

## ä¸€ã€ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ

### 1.1 æ ¸å¿ƒç‰¹æ€§

âœ… **å¼‚æ­¥å†™å…¥**ï¼šä¸é˜»å¡ä¸šåŠ¡é€»è¾‘  
âœ… **ç»“æ„åŒ–JSONæ ¼å¼**ï¼šä¾¿äºæŸ¥è¯¢å’Œåˆ†æ  
âœ… **è¯¦ç»†è®°å½•**ï¼šæ‰€æœ‰è¾“å…¥è¾“å‡ºå‚æ•°  
âœ… **è¯·æ±‚è¿½è¸ª**ï¼šé€šè¿‡ request_id è¿½è¸ªæ•´ä¸ªè¯·æ±‚é“¾è·¯  
âœ… **è‡ªåŠ¨è„±æ•**ï¼šæ•æ„Ÿä¿¡æ¯è‡ªåŠ¨è„±æ•  
âœ… **å¼‚å¸¸è®°å½•**ï¼šè‡ªåŠ¨è®°å½•å¼‚å¸¸å †æ ˆ  

### 1.2 æ—¥å¿—æ ¼å¼

æ‰€æœ‰æ—¥å¿—ä»¥ JSON æ ¼å¼å­˜å‚¨ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š

```json
{
  "timestamp": "2025-01-15T10:30:00.123456",
  "level": "INFO",
  "service": "BaziService",
  "function": "calculate_bazi",
  "message": "[BaziService] calculate_bazi - æ”¶åˆ°è¯·æ±‚",
  "request_id": "550e8400-e29b-41d4-a716-446655440000",
  "input": {
    "solar_date": "1990-01-01",
    "solar_time": "12:00",
    "gender": "male"
  },
  "output": {
    "result": "..."
  },
  "duration_ms": 123.45,
  "extra": {}
}
```

### 1.3 åŸºæœ¬ä½¿ç”¨

#### å¯¼å…¥æ—¥å¿—ç³»ç»Ÿ

```python
from server.utils.unified_logger import (
    get_unified_logger,
    log_request,
    log_response,
    log_error,
    trace_function
)
from server.utils.unified_logger import LogLevel
```

#### è®°å½•è¯·æ±‚æ—¥å¿—

```python
from server.utils.unified_logger import log_request

def calculate_bazi(solar_date: str, solar_time: str, gender: str):
    request_id = str(uuid.uuid4())
    
    # è®°å½•è¯·æ±‚
    log_request(
        service='BaziService',
        function='calculate_bazi',
        request_id=request_id,
        input_data={
            'solar_date': solar_date,
            'solar_time': solar_time,
            'gender': gender
        }
    )
    
    # ... ä¸šåŠ¡é€»è¾‘ ...
```

#### è®°å½•å“åº”æ—¥å¿—

```python
from server.utils.unified_logger import log_response
import time

def calculate_bazi(solar_date: str, solar_time: str, gender: str):
    start_time = time.time()
    request_id = str(uuid.uuid4())
    
    # ... ä¸šåŠ¡é€»è¾‘ ...
    result = {...}
    
    duration_ms = (time.time() - start_time) * 1000
    
    # è®°å½•å“åº”
    log_response(
        service='BaziService',
        function='calculate_bazi',
        request_id=request_id,
        output_data=result,
        duration_ms=duration_ms
    )
    
    return result
```

#### è®°å½•é”™è¯¯æ—¥å¿—

```python
from server.utils.unified_logger import log_error

def calculate_bazi(solar_date: str, solar_time: str, gender: str):
    request_id = str(uuid.uuid4())
    
    try:
        # ... ä¸šåŠ¡é€»è¾‘ ...
        return result
    except Exception as e:
        # è®°å½•é”™è¯¯ï¼ˆè‡ªåŠ¨åŒ…å«å¼‚å¸¸å †æ ˆï¼‰
        log_error(
            service='BaziService',
            function='calculate_bazi',
            error=e,
            request_id=request_id,
            input_data={
                'solar_date': solar_date,
                'solar_time': solar_time,
                'gender': gender
            }
        )
        raise
```

#### ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆæ¨èï¼‰

```python
from server.utils.unified_logger import trace_function
import uuid

def calculate_bazi(solar_date: str, solar_time: str, gender: str):
    request_id = str(uuid.uuid4())
    
    # ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨è‡ªåŠ¨è®°å½•è¯·æ±‚ã€å“åº”å’Œå¼‚å¸¸
    with trace_function(
        service='BaziService',
        function='calculate_bazi',
        request_id=request_id,
        input_data={
            'solar_date': solar_date,
            'solar_time': solar_time,
            'gender': gender
        }
    ):
        # ... ä¸šåŠ¡é€»è¾‘ ...
        result = {...}
        
        # è®°å½•å“åº”
        log_response(
            service='BaziService',
            function='calculate_bazi',
            request_id=request_id,
            output_data=result
        )
        
        return result
```

### 1.4 é…ç½®

é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®æ—¥å¿—ç³»ç»Ÿï¼š

```bash
# æ—¥å¿—ç›®å½•
export LOG_DIR="logs"

# æ—¥å¿—æ–‡ä»¶å
export LOG_FILE="unified.log"

# æ˜¯å¦å¼‚æ­¥å†™å…¥ï¼ˆé»˜è®¤ï¼štrueï¼‰
export LOG_ASYNC="true"

# æ˜¯å¦è¾“å‡ºåˆ°æ§åˆ¶å°ï¼ˆé»˜è®¤ï¼štrueï¼‰
export LOG_CONSOLE="true"
```

---

## äºŒã€æ•æ„Ÿä¿¡æ¯ç®¡ç†

### 2.1 æ ¸å¿ƒåŸåˆ™

ğŸ”´ **ç¦æ­¢ç¡¬ç¼–ç **ï¼šæ‰€æœ‰æ•æ„Ÿä¿¡æ¯å¿…é¡»ä»ç¯å¢ƒå˜é‡è¯»å–  
ğŸ”´ **ç»Ÿä¸€ç®¡ç†**ï¼šä½¿ç”¨ `SecretManager` ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æ•æ„Ÿä¿¡æ¯  
ğŸ”´ **è‡ªåŠ¨è„±æ•**ï¼šæ—¥å¿—ä¸­è‡ªåŠ¨è„±æ•æ•æ„Ÿä¿¡æ¯  
ğŸ”´ **è®¿é—®æ—¥å¿—**ï¼šæ‰€æœ‰æ•æ„Ÿä¿¡æ¯è®¿é—®éƒ½ä¼šè®°å½•æ—¥å¿—  

### 2.2 ä½¿ç”¨æ–¹æ³•

#### å¯¼å…¥æ•æ„Ÿä¿¡æ¯ç®¡ç†å™¨

```python
from server.utils.secret_manager import (
    get_secret_manager,
    get_coze_token,
    get_coze_bot_id,
    get_mysql_password,
    get_jwt_secret
)
```

#### è·å–æ•æ„Ÿä¿¡æ¯

```python
# æ–¹å¼1ï¼šä½¿ç”¨ä¾¿æ·å‡½æ•°
coze_token = get_coze_token()
coze_bot_id = get_coze_bot_id()
mysql_password = get_mysql_password()

# æ–¹å¼2ï¼šä½¿ç”¨ SecretManager
secret_manager = get_secret_manager()
coze_token = secret_manager.get_coze_token()
mysql_password = secret_manager.get_mysql_password()

# æ–¹å¼3ï¼šè·å–è‡ªå®šä¹‰æ•æ„Ÿä¿¡æ¯
custom_secret = secret_manager.get_secret('CUSTOM_SECRET_KEY', required=True)
```

#### éªŒè¯æ•æ„Ÿä¿¡æ¯

```python
from server.utils.secret_manager import get_secret_manager

secret_manager = get_secret_manager()
results = secret_manager.validate_secrets()

# results æ ¼å¼ï¼š
# {
#     'COZE_ACCESS_TOKEN': True,
#     'COZE_BOT_ID': True,
#     'MYSQL_PASSWORD': True,
#     'JWT_SECRET': False
# }
```

### 2.3 ç¯å¢ƒå˜é‡é…ç½®

æ‰€æœ‰æ•æ„Ÿä¿¡æ¯å¿…é¡»é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
# Coze API
export COZE_ACCESS_TOKEN="your_coze_token"
export COZE_BOT_ID="your_bot_id"
export INTENT_BOT_ID="your_intent_bot_id"
export FORTUNE_ANALYSIS_BOT_ID="your_fortune_bot_id"

# æ•°æ®åº“
export MYSQL_HOST="localhost"
export MYSQL_PORT="3306"
export MYSQL_USER="root"
export MYSQL_PASSWORD="your_password"
export MYSQL_DATABASE="hifate_bazi"

# Redis
export REDIS_PASSWORD="your_redis_password"

# JWT
export JWT_SECRET="your_jwt_secret"

# ç¬¬ä¸‰æ–¹ API Keys
export JISUAPI_KEY="your_jisuapi_key"
export TIANAPI_KEY="your_tianapi_key"
export API6API_KEY="your_api6api_key"
```

### 2.4 å¼€å‘ç¯å¢ƒé…ç½®ï¼ˆ.env æ–‡ä»¶ï¼‰

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# .env
COZE_ACCESS_TOKEN=your_coze_token
COZE_BOT_ID=your_bot_id
MYSQL_PASSWORD=your_password
JWT_SECRET=your_jwt_secret
```

âš ï¸ **é‡è¦**ï¼š`.env` æ–‡ä»¶å·²æ·»åŠ åˆ° `.gitignore`ï¼Œä¸ä¼šæäº¤åˆ°ä»£ç åº“ã€‚

---

## ä¸‰ã€SQL å®‰å…¨é˜²æŠ¤

### 3.1 æ ¸å¿ƒåŸåˆ™

ğŸ”´ **ç¦æ­¢å­—ç¬¦ä¸²æ‹¼æ¥**ï¼šæ‰€æœ‰ SQL å¿…é¡»ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢  
ğŸ”´ **è‡ªåŠ¨æ£€æŸ¥**ï¼šè‡ªåŠ¨æ£€æµ‹æ½œåœ¨çš„ SQL æ³¨å…¥é£é™©  
ğŸ”´ **è¯¦ç»†æ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰ SQL æ‰§è¡Œ  

### 3.2 ä½¿ç”¨æ–¹æ³•

#### å¯¼å…¥å®‰å…¨ SQL æ‰§è¡Œå™¨

```python
from server.utils.sql_security import (
    secure_execute_query,
    secure_execute_update,
    SecureSQLExecutor
)
```

#### æ‰§è¡Œå®‰å…¨æŸ¥è¯¢

```python
from server.utils.sql_security import secure_execute_query
import uuid

def get_user_by_id(user_id: int):
    request_id = str(uuid.uuid4())
    
    sql = "SELECT * FROM users WHERE id = %s"
    params = (user_id,)
    
    # ä½¿ç”¨å®‰å…¨æŸ¥è¯¢ï¼ˆè‡ªåŠ¨æ£€æŸ¥ SQL æ³¨å…¥é£é™©ï¼‰
    results = secure_execute_query(
        connection=conn,
        sql=sql,
        params=params,
        request_id=request_id,
        service='UserService',
        function='get_user_by_id'
    )
    
    return results
```

#### æ‰§è¡Œå®‰å…¨æ›´æ–°

```python
from server.utils.sql_security import secure_execute_update
import uuid

def update_user(user_id: int, username: str):
    request_id = str(uuid.uuid4())
    
    sql = "UPDATE users SET username = %s WHERE id = %s"
    params = (username, user_id)
    
    # ä½¿ç”¨å®‰å…¨æ›´æ–°ï¼ˆè‡ªåŠ¨æ£€æŸ¥ SQL æ³¨å…¥é£é™©ï¼‰
    affected = secure_execute_update(
        connection=conn,
        sql=sql,
        params=params,
        request_id=request_id,
        service='UserService',
        function='update_user'
    )
    
    return affected
```

#### âŒ ç¦æ­¢çš„å†™æ³•

```python
# âŒ é”™è¯¯ï¼šå­—ç¬¦ä¸²æ‹¼æ¥
sql = f"SELECT * FROM users WHERE id = {user_id}"
cursor.execute(sql)

# âŒ é”™è¯¯ï¼šæ ¼å¼åŒ–å­—ç¬¦ä¸²
sql = "SELECT * FROM users WHERE id = %s" % user_id
cursor.execute(sql)

# âŒ é”™è¯¯ï¼šç›´æ¥æ‹¼æ¥
sql = "SELECT * FROM users WHERE username = '" + username + "'"
cursor.execute(sql)
```

#### âœ… æ­£ç¡®çš„å†™æ³•

```python
# âœ… æ­£ç¡®ï¼šå‚æ•°åŒ–æŸ¥è¯¢
sql = "SELECT * FROM users WHERE id = %s"
params = (user_id,)
cursor.execute(sql, params)

# âœ… æ­£ç¡®ï¼šä½¿ç”¨å®‰å…¨æ‰§è¡Œå™¨
results = secure_execute_query(
    connection=conn,
    sql=sql,
    params=params,
    request_id=request_id,
    service='UserService',
    function='get_user_by_id'
)
```

---

## å››ã€ä½¿ç”¨ç¤ºä¾‹

### 4.1 å®Œæ•´ç¤ºä¾‹ï¼šæœåŠ¡å‡½æ•°

```python
from server.utils.unified_logger import trace_function, log_response
from server.utils.secret_manager import get_coze_token, get_coze_bot_id
from server.utils.sql_security import secure_execute_query
import uuid
import time

def analyze_bazi(solar_date: str, solar_time: str, gender: str):
    """åˆ†æå…«å­—"""
    request_id = str(uuid.uuid4())
    start_time = time.time()
    
    with trace_function(
        service='BaziAnalyzerService',
        function='analyze_bazi',
        request_id=request_id,
        input_data={
            'solar_date': solar_date,
            'solar_time': solar_time,
            'gender': gender
        }
    ):
        # 1. è·å–æ•æ„Ÿä¿¡æ¯
        coze_token = get_coze_token()
        bot_id = get_coze_bot_id()
        
        # 2. æŸ¥è¯¢æ•°æ®åº“ï¼ˆå®‰å…¨æŸ¥è¯¢ï¼‰
        sql = "SELECT * FROM bazi_rules WHERE rule_type = %s"
        params = ('wealth',)
        rules = secure_execute_query(
            connection=db_conn,
            sql=sql,
            params=params,
            request_id=request_id,
            service='BaziAnalyzerService',
            function='query_rules'
        )
        
        # 3. è°ƒç”¨å¤–éƒ¨ API
        result = call_coze_api(
            token=coze_token,
            bot_id=bot_id,
            prompt=build_prompt(solar_date, solar_time, gender)
        )
        
        duration_ms = (time.time() - start_time) * 1000
        
        # 4. è®°å½•å“åº”
        log_response(
            service='BaziAnalyzerService',
            function='analyze_bazi',
            request_id=request_id,
            output_data={
                'result': result,
                'rules_count': len(rules)
            },
            duration_ms=duration_ms
        )
        
        return result
```

### 4.2 å®Œæ•´ç¤ºä¾‹ï¼šAPI è·¯ç”±

```python
from fastapi import APIRouter, HTTPException
from server.utils.unified_logger import trace_function, log_response, log_error
from pydantic import BaseModel
import uuid

router = APIRouter()

class BaziRequest(BaseModel):
    solar_date: str
    solar_time: str
    gender: str

@router.post("/bazi/analyze")
async def analyze_bazi_api(request: BaziRequest):
    """åˆ†æå…«å­— API"""
    request_id = str(uuid.uuid4())
    
    with trace_function(
        service='BaziAPI',
        function='analyze_bazi_api',
        request_id=request_id,
        input_data=request.dict()
    ):
        try:
            result = analyze_bazi(
                solar_date=request.solar_date,
                solar_time=request.solar_time,
                gender=request.gender
            )
            
            log_response(
                service='BaziAPI',
                function='analyze_bazi_api',
                request_id=request_id,
                output_data={'success': True, 'result': result}
            )
            
            return result
            
        except Exception as e:
            log_error(
                service='BaziAPI',
                function='analyze_bazi_api',
                error=e,
                request_id=request_id,
                input_data=request.dict()
            )
            raise HTTPException(status_code=500, detail=str(e))
```

---

## äº”ã€è¿ç§»æŒ‡å—

### 5.1 è¿ç§»ç°æœ‰ä»£ç 

#### æ­¥éª¤1ï¼šæ›¿æ¢æ—¥å¿—è°ƒç”¨

**æ›¿æ¢å‰**ï¼š
```python
import logging
logger = logging.getLogger(__name__)
logger.info(f"å¤„ç†è¯·æ±‚: {request}")
```

**æ›¿æ¢å**ï¼š
```python
from server.utils.unified_logger import log_request
log_request(
    service='MyService',
    function='my_function',
    request_id=request_id,
    input_data={'request': request}
)
```

#### æ­¥éª¤2ï¼šæ›¿æ¢æ•æ„Ÿä¿¡æ¯è·å–

**æ›¿æ¢å‰**ï¼š
```python
import os
coze_token = os.getenv('COZE_ACCESS_TOKEN')
```

**æ›¿æ¢å**ï¼š
```python
from server.utils.secret_manager import get_coze_token
coze_token = get_coze_token()
```

#### æ­¥éª¤3ï¼šæ›¿æ¢ SQL æŸ¥è¯¢

**æ›¿æ¢å‰**ï¼š
```python
cursor.execute("SELECT * FROM users WHERE id = %s", (user_id,))
```

**æ›¿æ¢å**ï¼š
```python
from server.utils.sql_security import secure_execute_query
results = secure_execute_query(
    connection=conn,
    sql="SELECT * FROM users WHERE id = %s",
    params=(user_id,),
    request_id=request_id,
    service='MyService',
    function='get_user'
)
```

### 5.2 è¿ç§»æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰æ—¥å¿—è°ƒç”¨å·²æ›¿æ¢ä¸ºç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ
- [ ] æ‰€æœ‰æ•æ„Ÿä¿¡æ¯è·å–å·²æ›¿æ¢ä¸º SecretManager
- [ ] æ‰€æœ‰ SQL æŸ¥è¯¢å·²ä½¿ç”¨å®‰å…¨æ‰§è¡Œå™¨
- [ ] æ‰€æœ‰å‡½æ•°éƒ½æœ‰ request_id è¿½è¸ª
- [ ] æ‰€æœ‰è¾“å…¥è¾“å‡ºéƒ½è®°å½•æ—¥å¿—
- [ ] æ‰€æœ‰å¼‚å¸¸éƒ½è®°å½•é”™è¯¯æ—¥å¿—

---

## å…­ã€æ—¥å¿—æŸ¥è¯¢

### 6.1 æŸ¥çœ‹ç»Ÿä¸€æ—¥å¿—

```bash
# æŸ¥çœ‹æœ€æ–°æ—¥å¿—
tail -f logs/unified.log

# æŒ‰æœåŠ¡è¿‡æ»¤
grep '"service": "BaziService"' logs/unified.log

# æŒ‰è¯·æ±‚IDè¿½è¸ª
grep '"request_id": "550e8400-*"' logs/unified.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep '"level": "ERROR"' logs/unified.log

# æŸ¥çœ‹ JSON æ ¼å¼æ—¥å¿—ï¼ˆæ ¼å¼åŒ–ï¼‰
cat logs/unified.log | python -m json.tool
```

### 6.2 æ—¥å¿—åˆ†æå·¥å…·

```python
# åˆ†ææ—¥å¿—çš„ Python è„šæœ¬
import json

def analyze_logs(log_file: str):
    with open(log_file, 'r') as f:
        for line in f:
            try:
                log_entry = json.loads(line)
                if log_entry.get('level') == 'ERROR':
                    print(f"é”™è¯¯: {log_entry.get('message')}")
                    print(f"æœåŠ¡: {log_entry.get('service')}")
                    print(f"å‡½æ•°: {log_entry.get('function')}")
                    print("-" * 50)
            except json.JSONDecodeError:
                continue
```

---

## ä¸ƒã€å¸¸è§é—®é¢˜

### Q1: æ—¥å¿—æ–‡ä»¶å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ

A: æ—¥å¿—ç³»ç»Ÿå·²é…ç½®è‡ªåŠ¨è½®è½¬ï¼š
- å•ä¸ªæ–‡ä»¶æœ€å¤§ 100MB
- ä¿ç•™ 10 ä¸ªå¤‡ä»½æ–‡ä»¶
- è‡ªåŠ¨å‹ç¼©æ—§æ—¥å¿—

### Q2: å¼‚æ­¥å†™å…¥ä¼šå½±å“æ€§èƒ½å—ï¼Ÿ

A: ä¸ä¼šã€‚å¼‚æ­¥å†™å…¥ä½¿ç”¨é˜Ÿåˆ—ç¼“å†²ï¼Œä¸ä¼šé˜»å¡ä¸šåŠ¡é€»è¾‘ã€‚å¦‚æœé˜Ÿåˆ—æ»¡ï¼Œä¼šè‡ªåŠ¨é™çº§ä¸ºåŒæ­¥å†™å…¥ã€‚

### Q3: æ•æ„Ÿä¿¡æ¯å¦‚ä½•è„±æ•ï¼Ÿ

A: è‡ªåŠ¨è„±æ•è§„åˆ™ï¼š
- å¯†ç ï¼šå…¨éƒ¨æ›¿æ¢ä¸º `****`
- Tokenï¼šæ˜¾ç¤ºå‰4ä½å’Œå4ä½ï¼Œä¸­é—´ç”¨ `***` æ›¿æ¢
- å…¶ä»–æ•æ„Ÿå­—æ®µï¼šæ ¹æ®å­—æ®µåè‡ªåŠ¨è¯†åˆ«

### Q4: SQL å®‰å…¨æ£€æŸ¥ä¼šè¯¯æŠ¥å—ï¼Ÿ

A: å¯èƒ½ã€‚å¦‚æœé‡åˆ°è¯¯æŠ¥ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥ SQL è¯­å¥æ˜¯å¦ç¡®å®å®‰å…¨
2. è°ƒæ•´æ£€æŸ¥è§„åˆ™
3. æ·»åŠ ç™½åå•

---

## å…«ã€æœ€ä½³å®è·µ

1. **æ¯ä¸ªå‡½æ•°éƒ½è¦è®°å½•æ—¥å¿—**ï¼šè¯·æ±‚ã€å“åº”ã€é”™è¯¯éƒ½è¦è®°å½•
2. **ä½¿ç”¨ request_id è¿½è¸ª**ï¼šæ•´ä¸ªè¯·æ±‚é“¾è·¯ä½¿ç”¨åŒä¸€ä¸ª request_id
3. **è®°å½•æ‰€æœ‰è¾“å…¥è¾“å‡º**ï¼šä¾¿äºé—®é¢˜æ’æŸ¥
4. **å¼‚å¸¸å¿…é¡»è®°å½•**ï¼šæ‰€æœ‰å¼‚å¸¸éƒ½è¦è®°å½•è¯¦ç»†é”™è¯¯ä¿¡æ¯
5. **æ•æ„Ÿä¿¡æ¯ä¸ç¡¬ç¼–ç **ï¼šæ‰€æœ‰æ•æ„Ÿä¿¡æ¯ä»ç¯å¢ƒå˜é‡è¯»å–
6. **SQL ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢**ï¼šç¦æ­¢å­—ç¬¦ä¸²æ‹¼æ¥ SQL

---

**æ–‡æ¡£ç»´æŠ¤**ï¼šæŒç»­æ›´æ–°  
**æœ€åæ›´æ–°**ï¼š2025-01-15

