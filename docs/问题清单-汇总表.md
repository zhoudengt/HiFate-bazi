# 问题清单 - 汇总表

## 📊 问题总览

| 问题ID | 问题简述 | 优先级 | 影响范围 | 状态 |
|-------|---------|-------|---------|------|
| Q1 | 十神（主星/副星）数据映射 | 🔴 P0 | 财富规则（97条） | ⏳ 待确认 |
| Q2 | 地支关系（冲刑害）判断 | 🔴 P0 | 身体规则（6条） | ⏳ 待确认 |
| Q3 | 五行统计计算规则 | 🔴 P0 | 身体规则（5条） | ⏳ 待确认 |
| Q4 | 季节和时辰定义 | 🔴 P0 | 总评规则（533条） | ⏳ 待确认 |
| Q5 | 复合条件解析逻辑 | 🟢 P2 | 所有规则 | ⏳ 待确认 |
| Q6 | 结果数据补充 | 🟡 P1 | 性格/总评/身体（651条） | ⏳ 待确认 |
| Q7 | 两列"结果"处理 | 🟢 P2 | 性格/总评/身体 | ⏳ 待确认 |
| Q8 | 特殊术语定义 | 🔴 P0 | 财富规则 | ⏳ 待确认 |

---

## 🔴 P0级问题（必须立即确认）

### Q1. 十神数据映射 → 影响财富规则97条

| 子问题 | 问题 | 建议答案 |
|-------|------|---------|
| Q1.1 | "年干主星是正财" = `details['year']['main_star']=='正财'` | ✅ 是 |
| Q1.2 | "月干主星是正财" = `details['month']['main_star']=='正财'` | ✅ 是 |
| Q1.3 | "日支副星是正财" = `'正财' in details['day']['hidden_stars']` | ✅ 是 |
| Q1.4 | "副星有正官"（未指定柱）匹配规则 | ❓ 待确认 |

**Q1.4 是关键！** 建议答案：全部四柱的 `hidden_stars` 中任意一个包含即可

---

### Q2. 地支关系判断 → 影响身体规则6条

| 子问题 | 问题 | 建议答案 |
|-------|------|---------|
| Q2.1 | 使用 `relationships['branch_relations']['chong']` 判断 | ✅ 是 |
| Q2.2 | 匹配逻辑：branches包含['子','午']即匹配 | ✅ 是 |

---

### Q3. 五行统计 → 影响身体规则5条

| 子问题 | 问题 | 建议答案 |
|-------|------|---------|
| Q3.1 | "火低于1个（包含1个）" = `element_counts['火']<=1` | ✅ 是 |
| Q3.2 | `element_counts` 包含天干+地支统计 | ✅ 是 |
| Q3.3 | "低于1个（包含1个）"含义 | ✅ `<=1` |

---

### Q4. 季节和时辰 → 影响总评规则533条

| 子问题 | 问题 | 建议答案 |
|-------|------|---------|
| Q4.1 | "春季"定义 | ❓ 农历1-3月？节气？ |
| Q4.2 | "夏/秋/冬季"定义 | ❓ 待确认 |
| Q4.3 | "卯时到申时" = `['卯','辰','巳','午','未','申']` | ✅ 是 |
| Q4.4 | "酉时到寅时" = `['酉','戌','亥','子','丑','寅']` | ✅ 是 |
| Q4.5 | "农历六月"如何获取 | ❓ 待确认 |

**Q4.1 是关键！** 需要明确季节定义

---

### Q8. 特殊术语 → 影响财富规则

| 子问题 | 问题 | 建议答案 |
|-------|------|---------|
| Q8.1 | "身旺/极旺"判断方式 | ✅ 调用旺衰API |
| Q8.2 | `status` 字段可能值 | ❓ 待确认 |
| Q8.3 | "禄"临官判断 | ❓ 待确认 |
| Q8.4 | "长生"判断 | ❓ 十二长生？ |
| Q8.5 | "库"判断 | ❓ 辰戌丑未？ |
| Q8.6 | "不受刑冲"判断 | ❓ 待确认 |

**Q8.1, Q8.2, Q8.6 是关键！**

---

## 🟡 P1级问题（影响功能完整性）

### Q6. 结果数据补充 → 影响651条规则

- ❌ 性格规则：60条，结果为None
- ❌ 总评规则：533条，结果为None
- ❌ 身体规则：58条，结果为None

**建议：** 先开发财富规则（97条完整），验证后再补充

---

## 🟢 P2级问题（不阻塞开发）

### Q5. 复合条件解析

- 可以在开发过程中根据具体情况调整

### Q7. 两列"结果"

- 建议：合并显示或只使用第一列

---

## ✅ 最小可回答清单（5个关键问题）

**只需回答这5个问题，即可立即开始开发财富规则（97条）：**

1. **Q1.4** - "副星有正官"是指全部四柱还是特定柱？
   ```
   答：A. 全部四柱任意包含 / B. 特定柱（说明）
   ```

2. **Q3.1** - "火低于1个（包含1个）" = `element_counts['火']<=1`？
   ```
   答：是 / 否 / 其他
   ```

3. **Q4.1** - "春季"定义？
   ```
   答：农历1-3月 / 节气立春-立夏 / 阳历2-4月 / 其他
   ```

4. **Q8.1** - "身旺/极旺"如何判断？
   ```
   答：调用/api/v1/bazi/wangshuai的status字段 / 其他方式
   ```

5. **Q8.2** - 旺衰API的status字段可能值？
   ```
   答：身旺、极旺、身弱、极弱 等
   ```

---

## 📝 快速回复格式

**方式1：简洁回复**
```
Q1.4: A
Q3.1: 是
Q4.1: 节气立春-立夏
Q8.1: 是，调用旺衰API
Q8.2: 身旺、极旺、身弱、极弱
```

**方式2：详细说明**
- 使用 `问题清单-快速回复模板.md` 填写

---

## 🎯 开发顺序建议

### 阶段1：财富规则（推荐优先开发）
- ✅ 97条规则，数据完整
- ❓ 需要确认：Q1, Q8
- ⏱️ 预计2-3小时完成

### 阶段2：身体规则
- ⚠️ 58条规则，部分数据缺失（结果为None）
- ❓ 需要确认：Q2, Q3
- ⏱️ 预计1-2小时完成

### 阶段3：总评规则
- ⚠️ 533条规则，数据缺失（结果为None）
- ❓ 需要确认：Q4
- ⏱️ 预计3-4小时完成

### 阶段4：性格规则
- ⚠️ 60条规则，数据缺失（结果为None）
- ⏱️ 预计1小时完成

---

**准备就绪！请回复5个关键问题，立即开始开发！** 🚀

