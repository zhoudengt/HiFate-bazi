# 启动服务指南

## 问题：登录时出现 "Failed to fetch" 错误

这个错误通常是因为**后端服务没有运行**。

## 解决步骤

### 1. 启动后端服务

打开一个终端窗口，执行：

```bash
cd /Users/zhoudt/Downloads/project/HiFate-bazi
python server/start.py
```

或者使用虚拟环境：

```bash
cd /Users/zhoudt/Downloads/project/HiFate-bazi
.venv/bin/python server/start.py
```

**成功启动的标志：**
- 看到类似 `✓ 服务器已启动（端口 8001）` 的消息
- 没有报错信息

### 2. 启动前端服务器（新开一个终端）

```bash
cd /Users/zhoudt/Downloads/project/HiFate-bazi/frontend
python3 -m http.server 8080
```

或者使用启动脚本：

```bash
cd /Users/zhoudt/Downloads/project/HiFate-bazi/frontend
./start.sh
```

### 3. 访问登录页面

在浏览器中打开：`http://127.0.0.1:8080/login.html`

### 4. 登录

- 用户名：`admin`
- 密码：`admin123`

## 快速检查

### 检查后端是否运行

```bash
curl http://127.0.0.1:8001/docs
```

如果返回 HTML 内容，说明后端已启动。

### 检查端口占用

```bash
lsof -ti:8001
```

如果有输出，说明端口被占用（可能是服务已启动）。

## 常见问题

### 问题 1：端口已被占用

**解决：**
```bash
# 查找占用端口的进程
lsof -ti:8001

# 杀死进程（替换 PID 为实际进程号）
kill -9 <PID>
```

### 问题 2：Python 模块缺失

**解决：**
```bash
# 安装依赖
pip install -r requirements.txt

# 或使用虚拟环境
.venv/bin/pip install -r requirements.txt
```

### 问题 3：CORS 错误

**解决：** 确保使用本地服务器启动前端，不要直接打开 HTML 文件。

## 一键启动脚本（可选）

可以创建一个启动脚本，同时启动前后端：

```bash
#!/bin/bash
# start_all.sh

# 启动后端（后台运行）
cd /Users/zhoudt/Downloads/project/HiFate-bazi
python server/start.py &
BACKEND_PID=$!

# 等待后端启动
sleep 3

# 启动前端
cd frontend
python3 -m http.server 8080 &
FRONTEND_PID=$!

echo "后端 PID: $BACKEND_PID"
echo "前端 PID: $FRONTEND_PID"
echo "访问: http://127.0.0.1:8080"
echo "按 Ctrl+C 停止服务"

# 等待中断信号
trap "kill $BACKEND_PID $FRONTEND_PID; exit" INT TERM
wait
```


