# ç”Ÿäº§ç¯å¢ƒæ¶æ„å’Œéƒ¨ç½²è§„èŒƒ

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£è®°å½•ç”Ÿäº§ç¯å¢ƒçš„æ¶æ„ä¿¡æ¯ã€éƒ¨ç½²é…ç½®å’Œè¿ç»´è§„èŒƒï¼Œç¡®ä¿ç³»ç»Ÿçš„ç»§æ‰¿æ€§ã€ç¨³å®šæ€§å’Œå¯ç”¨æ€§ã€‚

**æœ€åæ›´æ–°**ï¼š2025-12-12

---

## ğŸ—ï¸ ç”Ÿäº§ç¯å¢ƒæ¶æ„

### åŒæœºéƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”Ÿäº§ç¯å¢ƒåŒæœºæ¶æ„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      Node1 (ä¸»èŠ‚ç‚¹)   â”‚         â”‚      Node2 (ä»èŠ‚ç‚¹)   â”‚    â”‚
â”‚  â”‚  8.210.52.217        â”‚         â”‚  47.243.160.43       â”‚    â”‚
â”‚  â”‚  172.18.121.222      â”‚         â”‚  172.18.121.223      â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  Nginx (80/443)      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Nginx (80/443)      â”‚    â”‚
â”‚  â”‚  Web (8001)          â”‚         â”‚  Web (8001)          â”‚    â”‚
â”‚  â”‚  MySQL ä¸»åº“ (3306)   â”‚â—„â”€â”€å¤åˆ¶â”€â”€â–ºâ”‚  MySQL ä»åº“ (3306)   â”‚    â”‚
â”‚  â”‚  Redis ä¸»åº“ (6379)   â”‚â—„â”€â”€å¤åˆ¶â”€â”€â–ºâ”‚  Redis ä»åº“ (6379)   â”‚    â”‚
â”‚  â”‚  å¾®æœåŠ¡ (9001-9010)  â”‚         â”‚  å¾®æœåŠ¡ (9001-9010)  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æœåŠ¡å™¨ä¿¡æ¯

| èŠ‚ç‚¹ | å…¬ç½‘IP | å†…ç½‘IP | è§’è‰² | çŠ¶æ€ |
|------|--------|--------|------|------|
| Node1 | 8.210.52.217 | 172.18.121.222 | ä¸»èŠ‚ç‚¹ï¼ˆMySQLä¸»/Redisä¸»ï¼‰ | âœ… è¿è¡Œä¸­ |
| Node2 | 47.243.160.43 | 172.18.121.223 | ä»èŠ‚ç‚¹ï¼ˆMySQLä»/Redisä»ï¼‰ | âœ… è¿è¡Œä¸­ |
| æµ‹è¯•ç¯å¢ƒ | 123.57.216.15 | - | æµ‹è¯•ç¯å¢ƒ | âœ… è¿è¡Œä¸­ |

### æœåŠ¡ç«¯å£æ¸…å•

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| Nginx | 80, 443 | è´Ÿè½½å‡è¡¡å’Œåå‘ä»£ç† |
| Web æœåŠ¡ | 8001 | FastAPI ä¸»æœåŠ¡ |
| bazi-core | 9001 | å…«å­—æ ¸å¿ƒè®¡ç®—æœåŠ¡ |
| bazi-fortune | 9002 | è¿åŠ¿è®¡ç®—æœåŠ¡ |
| bazi-analyzer | 9003 | å…«å­—åˆ†ææœåŠ¡ |
| bazi-rule | 9004 | è§„åˆ™åŒ¹é…æœåŠ¡ |
| fortune-analysis | 9005 | è¿åŠ¿åˆ†ææœåŠ¡ |
| payment-service | 9006 | æ”¯ä»˜æœåŠ¡ |
| fortune-rule | 9007 | è¿åŠ¿è§„åˆ™æœåŠ¡ |
| intent-service | 9008 | æ„å›¾è¯†åˆ«æœåŠ¡ |
| prompt-optimizer | 9009 | æç¤ºä¼˜åŒ–æœåŠ¡ |
| desk-fengshui | 9010 | åŠå…¬æ¡Œé£æ°´åˆ†ææœåŠ¡ |
| MySQL | 3306 | æ•°æ®åº“ |
| Redis | 6379 | ç¼“å­˜ |

---

## ğŸ”§ è´Ÿè½½å‡è¡¡é…ç½®

### Nginx è´Ÿè½½å‡è¡¡

**é…ç½®ä½ç½®**ï¼š`deploy/nginx/conf.d/hifate.conf`

**ä¸Šæ¸¸æœåŠ¡å™¨é…ç½®**ï¼š
```nginx
upstream web_backend {
    # Node1 åº”ç”¨æœåŠ¡ï¼ˆå†…ç½‘IPï¼‰
    server 172.18.121.222:8001 weight=1 max_fails=3 fail_timeout=30s;
    # Node2 åº”ç”¨æœåŠ¡ï¼ˆå†…ç½‘IPï¼‰
    server 172.18.121.223:8001 weight=1 max_fails=3 fail_timeout=30s;
    
    keepalive 32;
}
```

**å…³é”®é…ç½®**ï¼š
- âœ… **å¿…é¡»ä½¿ç”¨å†…ç½‘ IP**ï¼ˆ172.18.121.222/223ï¼‰
- âŒ **ç¦æ­¢ä½¿ç”¨å…¬ç½‘ IP**ï¼ˆ8.210.52.217/47.243.160.43ï¼‰
- âŒ **ç¦æ­¢ä½¿ç”¨å ä½ç¬¦**ï¼ˆNODE1_IP/NODE2_IPï¼‰

**è¶…æ—¶é…ç½®**ï¼ˆå·²ä¼˜åŒ–ï¼‰ï¼š
```nginx
# åç«¯ API
location /api/ {
    proxy_pass http://web_backend;
    
    # ä¼˜åŒ–è¶…æ—¶è®¾ç½®ï¼šå¿«é€Ÿå¤±è´¥ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
    proxy_connect_timeout 10s;   # è¿æ¥è¶…æ—¶ï¼š10ç§’ï¼ˆå¿«é€Ÿæ£€æµ‹æœåŠ¡ä¸å¯ç”¨ï¼‰
    proxy_send_timeout 30s;      # å‘é€è¶…æ—¶ï¼š30ç§’ï¼ˆé€‚åˆå¤§å¤šæ•°APIï¼‰
    proxy_read_timeout 30s;      # è¯»å–è¶…æ—¶ï¼š30ç§’ï¼ˆé€‚åˆå¤§å¤šæ•°APIï¼‰
    
    # æ•…éšœè½¬ç§»ï¼šå¿«é€Ÿåˆ‡æ¢åˆ°å¤‡ç”¨èŠ‚ç‚¹
    proxy_next_upstream error timeout http_500 http_502 http_503 http_504;
    proxy_next_upstream_tries 2;  # æœ€å¤šå°è¯•2ä¸ªèŠ‚ç‚¹
    proxy_next_upstream_timeout 5s;  # æ•…éšœè½¬ç§»è¶…æ—¶ï¼š5ç§’ï¼ˆå¿«é€Ÿåˆ‡æ¢ï¼‰
}
```

**æ•…éšœè½¬ç§»æœºåˆ¶**ï¼š
- `max_fails=3`ï¼šè¿ç»­å¤±è´¥3æ¬¡åæ ‡è®°ä¸ºä¸å¯ç”¨
- `fail_timeout=30s`ï¼š30ç§’åé‡æ–°å°è¯•
- `proxy_next_upstream`ï¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨èŠ‚ç‚¹

---

## ğŸ’¾ æ•°æ®åº“ä¸»ä»å¤åˆ¶

### MySQL ä¸»ä»å¤åˆ¶

**ä¸»åº“é…ç½®**ï¼ˆNode1ï¼‰ï¼š
- **åœ°å€**ï¼š172.18.121.222:3306
- **å®¹å™¨å**ï¼š`hifate-mysql-master`
- **é…ç½®æ–‡ä»¶**ï¼š`deploy/mysql/master.cnf`
- **GTID æ¨¡å¼**ï¼šå·²å¯ç”¨

**ä»åº“é…ç½®**ï¼ˆNode2ï¼‰ï¼š
- **åœ°å€**ï¼š172.18.121.223:3306
- **å®¹å™¨å**ï¼š`hifate-mysql-slave`
- **é…ç½®æ–‡ä»¶**ï¼š`deploy/mysql/slave.cnf`
- **åªè¯»æ¨¡å¼**ï¼šå·²å¯ç”¨

**å¤åˆ¶ç”¨æˆ·**ï¼š
```sql
CREATE USER 'repl'@'%' IDENTIFIED BY '${SSH_PASSWORD}';
GRANT REPLICATION SLAVE ON *.* TO 'repl'@'%';
FLUSH PRIVILEGES;
```

**ä»åº“é…ç½®å‘½ä»¤**ï¼š
```sql
CHANGE MASTER TO
    MASTER_HOST='172.18.121.222',
    MASTER_USER='repl',
    MASTER_PASSWORD='${SSH_PASSWORD}',
    MASTER_AUTO_POSITION=1;
START SLAVE;
```

**çŠ¶æ€æ£€æŸ¥**ï¼š
```sql
SHOW SLAVE STATUS\G
-- å…³é”®æŒ‡æ ‡ï¼š
-- Slave_IO_Running: Yes
-- Slave_SQL_Running: Yes
-- Seconds_Behind_Master: 0
```

### Redis ä¸»ä»å¤åˆ¶

**ä¸»åº“é…ç½®**ï¼ˆNode1ï¼‰ï¼š
- **åœ°å€**ï¼š172.18.121.222:6379
- **å®¹å™¨å**ï¼š`hifate-redis-master`
- **é…ç½®æ–‡ä»¶**ï¼š`deploy/redis/master.conf`

**ä»åº“é…ç½®**ï¼ˆNode2ï¼‰ï¼š
- **åœ°å€**ï¼š172.18.121.223:6379
- **å®¹å™¨å**ï¼š`hifate-redis-slave`
- **é…ç½®æ–‡ä»¶**ï¼š`deploy/redis/slave.conf`
- **ä¸»åº“åœ°å€**ï¼š172.18.121.222:6379

---

## ğŸ” éƒ¨ç½²é…ç½®ä¿¡æ¯

### ç¯å¢ƒå˜é‡

**æ•°æ®åº“é…ç½®**ï¼š
- **MySQL å¯†ç **ï¼š`${SSH_PASSWORD}`
- **MySQL å¤åˆ¶å¯†ç **ï¼š`${SSH_PASSWORD}`
- **MySQL æ•°æ®åº“**ï¼š`hifate_bazi`

**åº”ç”¨é…ç½®**ï¼š
- **SECRET_KEY**ï¼šä»ç¯å¢ƒå˜é‡ `SECRET_KEY` è¯»å–ï¼ˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨å¼ºéšæœºå¯†é’¥ï¼‰
- **ACR ç”¨æˆ·å**ï¼šä»ç¯å¢ƒå˜é‡ `ACR_USERNAME` æˆ– `ACR_ACCESS_KEY_ID` è¯»å–
- **ACR å¯†ç **ï¼šä»ç¯å¢ƒå˜é‡ `ACR_PASSWORD` æˆ– `ACR_ACCESS_KEY_SECRET` è¯»å–

**Git ä»“åº“**ï¼š
- **ä»“åº“åœ°å€**ï¼š`https://github.com/zhoudengt/HiFate-bazi`
- **é»˜è®¤åˆ†æ”¯**ï¼š`master`

### é¡¹ç›®ç›®å½•

| è·¯å¾„ | è¯´æ˜ |
|------|------|
| `/opt/HiFate-bazi` | é¡¹ç›®æ ¹ç›®å½• |
| `/opt/HiFate-bazi/.env` | ç¯å¢ƒå˜é‡æ–‡ä»¶ |
| `/opt/HiFate-bazi/deploy/docker` | Docker Compose é…ç½® |
| `/opt/HiFate-bazi/logs` | æ—¥å¿—ç›®å½• |

---

## ğŸš€ éƒ¨ç½²æµç¨‹

### é¦–æ¬¡éƒ¨ç½²

1. **åˆå§‹åŒ–æœåŠ¡å™¨**ï¼š
   ```bash
   bash deploy/scripts/init-ecs.sh
   ```

2. **å…‹éš†ä»£ç **ï¼š
   ```bash
   cd /opt/HiFate-bazi
   git clone https://github.com/zhoudengt/HiFate-bazi .
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**ï¼š
   ```bash
   cp deploy/env/env.template .env
   vim .env  # ç¼–è¾‘é…ç½®
   ```

4. **ä¿®å¤ gRPC ä»£ç **ï¼ˆå¿…é¡»ï¼‰ï¼š
   ```bash
   python3 scripts/grpc/fix_version_check.py
   ```

5. **é…ç½® Nginx**ï¼ˆå¿…é¡»ï¼‰ï¼š
   ```bash
   # æ›¿æ¢ IP å ä½ç¬¦
   sed -i 's/NODE1_IP/172.18.121.222/g' deploy/nginx/conf.d/hifate.conf
   sed -i 's/NODE2_IP/172.18.121.223/g' deploy/nginx/conf.d/hifate.conf
   ```

6. **éƒ¨ç½² Node1**ï¼š
   ```bash
   bash deploy/scripts/deploy.sh node1
   ```

7. **é…ç½® MySQL ä¸»ä»å¤åˆ¶ç”¨æˆ·**ï¼ˆNode1ï¼‰ï¼š
   ```sql
   CREATE USER 'repl'@'%' IDENTIFIED BY '${SSH_PASSWORD}';
   GRANT REPLICATION SLAVE ON *.* TO 'repl'@'%';
   FLUSH PRIVILEGES;
   ```

8. **éƒ¨ç½² Node2**ï¼š
   ```bash
   bash deploy/scripts/deploy.sh node2
   ```

9. **é…ç½® MySQL ä»åº“**ï¼ˆNode2ï¼‰ï¼š
   ```sql
   CHANGE MASTER TO
       MASTER_HOST='172.18.121.222',
       MASTER_USER='repl',
       MASTER_PASSWORD='${SSH_PASSWORD}',
       MASTER_AUTO_POSITION=1;
   START SLAVE;
   ```

10. **éªŒè¯éƒ¨ç½²**ï¼š
    ```bash
    # æ£€æŸ¥æœåŠ¡çŠ¶æ€
    docker ps | grep hifate
    
    # æ£€æŸ¥å¥åº·çŠ¶æ€
    curl http://8.210.52.217/health
    curl http://47.243.160.43/health
    
    # æ£€æŸ¥ MySQL ä¸»ä»å¤åˆ¶
    docker exec -it hifate-mysql-slave mysql -uroot -p${SSH_PASSWORD} -e "SHOW SLAVE STATUS\G"
    ```

### æ—¥å¸¸æ›´æ–°

1. **æ›´æ–°ä»£ç **ï¼š
   ```bash
   cd /opt/HiFate-bazi
   git pull origin master
   ```

2. **ä¿®å¤ gRPC ä»£ç **ï¼ˆå¦‚æœæ›´æ–°äº† protoï¼‰ï¼š
   ```bash
   python3 scripts/grpc/fix_version_check.py
   ```

3. **é‡å¯æœåŠ¡**ï¼š
   ```bash
   cd deploy/docker
   docker-compose -f docker-compose.prod.yml -f docker-compose.node1.yml --env-file /opt/HiFate-bazi/.env restart
   ```

---

## ğŸ” è¿ç»´å‘½ä»¤

### æœåŠ¡çŠ¶æ€æ£€æŸ¥

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
docker ps | grep hifate

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker logs hifate-web --tail 100
docker logs hifate-bazi-core --tail 100
docker logs hifate-nginx --tail 100

# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://8.210.52.217/health
curl http://47.243.160.43/health
```

### æ•°æ®åº“ç»´æŠ¤

```bash
# æ£€æŸ¥ MySQL ä¸»ä»å¤åˆ¶çŠ¶æ€
docker exec -it hifate-mysql-slave mysql -uroot -p${SSH_PASSWORD} -e "SHOW SLAVE STATUS\G"

# æ£€æŸ¥ MySQL è¿æ¥æ•°
docker exec -it hifate-mysql-master mysql -uroot -p${SSH_PASSWORD} -e "SHOW PROCESSLIST;"

# æ£€æŸ¥ Redis ä¸»ä»å¤åˆ¶çŠ¶æ€
docker exec -it hifate-redis-slave redis-cli INFO replication
```

### è´Ÿè½½å‡è¡¡æ£€æŸ¥

```bash
# æ£€æŸ¥ Nginx é…ç½®
docker exec hifate-nginx cat /etc/nginx/conf.d/hifate.conf | grep upstream

# æ£€æŸ¥ Nginx çŠ¶æ€
curl http://8.210.52.217/nginx_status

# æ£€æŸ¥è´Ÿè½½å‡è¡¡æ—¥å¿—
docker logs hifate-nginx --tail 100 | grep upstream
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜ 1: å¾®æœåŠ¡æŒç»­é‡å¯

**ç°è±¡**ï¼š
- å¾®æœåŠ¡ï¼ˆbazi-core, bazi-fortune ç­‰ï¼‰æŒç»­é‡å¯
- é”™è¯¯ï¼š`AttributeError: '_Server' object has no attribute 'add_registered_method_handlers'`

**åŸå› **ï¼š
- gRPC ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ä¿®å¤ gRPC ä»£ç 
python3 scripts/grpc/fix_version_check.py

# é‡å¯å¾®æœåŠ¡
cd deploy/docker
docker-compose -f docker-compose.prod.yml -f docker-compose.node1.yml --env-file /opt/HiFate-bazi/.env restart
```

### é—®é¢˜ 2: è´Ÿè½½å‡è¡¡ä¸å·¥ä½œ

**ç°è±¡**ï¼š
- è¯·æ±‚åªåˆ°ä¸€ä¸ªèŠ‚ç‚¹
- æˆ–è¯·æ±‚å¤±è´¥

**åŸå› **ï¼š
- Nginx é…ç½®ä¸­çš„ IP æœªæ›¿æ¢
- æˆ–ä½¿ç”¨äº†å…¬ç½‘ IP

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥é…ç½®
docker exec hifate-nginx cat /etc/nginx/conf.d/hifate.conf | grep upstream

# å¦‚æœçœ‹åˆ° NODE1_IP æˆ– NODE2_IPï¼Œéœ€è¦æ›¿æ¢
sed -i 's/NODE1_IP/172.18.121.222/g' deploy/nginx/conf.d/hifate.conf
sed -i 's/NODE2_IP/172.18.121.223/g' deploy/nginx/conf.d/hifate.conf
docker restart hifate-nginx
```

### é—®é¢˜ 3: MySQL ä¸»ä»å¤åˆ¶å»¶è¿Ÿ

**ç°è±¡**ï¼š
- `Seconds_Behind_Master > 0`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥ä»åº“çŠ¶æ€
docker exec -it hifate-mysql-slave mysql -uroot -p${SSH_PASSWORD} -e "SHOW SLAVE STATUS\G"

# å¦‚æœ IO æˆ– SQL çº¿ç¨‹åœæ­¢ï¼Œé‡å¯ä»åº“
docker restart hifate-mysql-slave
```

### é—®é¢˜ 4: è®¿é—®æ…¢

**å¯èƒ½åŸå› **ï¼š
1. å¾®æœåŠ¡é‡å¯ä¸­ï¼ˆç­‰å¾…æ¢å¤ï¼‰
2. ä½¿ç”¨å…¬ç½‘ IP è·¨èŠ‚ç‚¹è°ƒç”¨ï¼ˆæ”¹ä¸ºå†…ç½‘ IPï¼‰
3. Nginx è¶…æ—¶è®¾ç½®è¿‡é•¿ï¼ˆå·²ä¼˜åŒ–ï¼‰

**æ£€æŸ¥æ–¹æ³•**ï¼š
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker ps | grep Restarting

# æ£€æŸ¥ Nginx é…ç½®
docker exec hifate-nginx cat /etc/nginx/conf.d/hifate.conf | grep -E 'NODE1_IP|NODE2_IP|172.18'

# æµ‹è¯•å“åº”æ—¶é—´
time curl http://8.210.52.217/health
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### æ­£å¸¸æŒ‡æ ‡

| æŒ‡æ ‡ | æ­£å¸¸å€¼ | è¯´æ˜ |
|------|--------|------|
| API å“åº”æ—¶é—´ | < 2ç§’ | å¤§å¤šæ•° API è¯·æ±‚ |
| æœåŠ¡é‡å¯æ¬¡æ•° | 0 | æ­£å¸¸è¿è¡Œæ—¶ä¸åº”é‡å¯ |
| MySQL ä¸»ä»å»¶è¿Ÿ | 0ç§’ | å®Œå…¨åŒæ­¥ |
| è´Ÿè½½å‡è¡¡çŠ¶æ€ | ä¸¤ä¸ªèŠ‚ç‚¹éƒ½æ­£å¸¸ | æ•…éšœè½¬ç§»æ­£å¸¸ |

### ç›‘æ§å‘½ä»¤

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker ps | grep hifate | grep -E 'Up|Restarting'

# æµ‹è¯• API å“åº”æ—¶é—´
time curl -X POST http://8.210.52.217/api/v1/bazi/calculate \
  -H "Content-Type: application/json" \
  -d '{"solar_date":"1990-01-15","solar_time":"12:00","gender":"male"}'

# æ£€æŸ¥ MySQL ä¸»ä»å»¶è¿Ÿ
docker exec -it hifate-mysql-slave mysql -uroot -p${SSH_PASSWORD} -e "SHOW SLAVE STATUS\G" | grep Seconds_Behind_Master
```

---

## ğŸ”„ æ›´æ–°è®°å½•

| æ—¥æœŸ | æ›´æ–°å†…å®¹ | æ›´æ–°äºº |
|------|---------|--------|
| 2025-12-12 | åˆå§‹ç‰ˆæœ¬ï¼Œè®°å½•ç”Ÿäº§ç¯å¢ƒæ¶æ„å’Œéƒ¨ç½²ä¿¡æ¯ | AI Assistant |

---

**æ–‡æ¡£ç»´æŠ¤**ï¼š
- æ¯æ¬¡éƒ¨ç½²åæ›´æ–°çŠ¶æ€ä¿¡æ¯
- æ¯æ¬¡æ¶æ„å˜æ›´åæ›´æ–°æ–‡æ¡£
- æ¯æ¬¡é—®é¢˜ä¿®å¤åæ›´æ–°å¸¸è§é—®é¢˜

