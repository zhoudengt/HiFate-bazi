# æ—¥å¿—ä½ç½®è¯´æ˜

## ğŸ“ ä¸»è¦æ—¥å¿—æ–‡ä»¶ä½ç½®

### 1. æ„å›¾è¯†åˆ«æœåŠ¡æ—¥å¿—

| æ—¥å¿—æ–‡ä»¶ | è¯´æ˜ | æŸ¥çœ‹å‘½ä»¤ |
|---------|------|---------|
| `logs/intent_service_9008.log` | **gRPCæœåŠ¡æ—¥å¿—ï¼ˆç«¯å£9008ï¼‰** - åŒ…å«æ‰€æœ‰æ„å›¾è¯†åˆ«è¯·æ±‚å’Œå“åº” | `tail -f logs/intent_service_9008.log` |
| `logs/intent_service.log` | **æ„å›¾è¯†åˆ«æ¨¡å—è¯¦ç»†æ—¥å¿—** - åŒ…å«åˆ†ç±»è¿‡ç¨‹ã€æ—¶é—´æ„å›¾è¯†åˆ«ç­‰ | `tail -f logs/intent_service.log` |
| `logs/intent_service_startup.log` | æœåŠ¡å¯åŠ¨æ—¥å¿— | `cat logs/intent_service_startup.log` |

**å…³é”®æ—¥å¿—å†…å®¹**ï¼š
- æ„å›¾è¯†åˆ«è¯·æ±‚å’Œå“åº”
- æ—¶é—´æ„å›¾è¯†åˆ«ï¼ˆåå¹´ã€æ˜å¹´ã€ä»Šå¹´ç­‰ï¼‰
- æœ¬åœ°æ¨¡å‹åˆ†ç±»ç»“æœ
- LLMå…œåº•è°ƒç”¨
- è§„åˆ™åå¤„ç†ç»“æœ

**æŸ¥çœ‹ç¤ºä¾‹**ï¼š
```bash
# æŸ¥çœ‹æ—¶é—´æ„å›¾è¯†åˆ«
tail -100 logs/intent_service.log | grep -E "åå¹´|specific_year|target_years|2027"

# æŸ¥çœ‹æ„å›¾è¯†åˆ«æ€§èƒ½
tail -100 logs/intent_service.log | grep -E "è€—æ—¶|response_time_ms|confidence"
```

---

### 2. WebæœåŠ¡æ—¥å¿—

| æ—¥å¿—æ–‡ä»¶ | è¯´æ˜ | æŸ¥çœ‹å‘½ä»¤ |
|---------|------|---------|
| `logs/web_app_8001.log` | **Webåº”ç”¨ä¸»æ—¥å¿—ï¼ˆç«¯å£8001ï¼‰** - åŒ…å«æ‰€æœ‰APIè¯·æ±‚ | `tail -f logs/web_app_8001.log` |
| `logs/server_8001.log` | æœåŠ¡å™¨å¯åŠ¨æ—¥å¿— | `cat logs/server_8001.log` |

**å…³é”®æ—¥å¿—å†…å®¹**ï¼š
- æ™ºèƒ½è¿åŠ¿åˆ†æAPIè¯·æ±‚
- æ—¶é—´æ„å›¾è¯†åˆ«ç»“æœ
- æµå¹´å¤§è¿åˆ†æè¿‡ç¨‹
- å…«å­—è®¡ç®—
- è§„åˆ™åŒ¹é…
- LLMæ·±åº¦è§£è¯»

**æŸ¥çœ‹ç¤ºä¾‹**ï¼š
```bash
# æŸ¥çœ‹æ™ºèƒ½è¿åŠ¿åˆ†ææ—¥å¿—
tail -300 logs/web_app_8001.log | grep -E "smart-analyze|æ—¶é—´æ„å›¾è¯†åˆ«|target_years"

# æŸ¥çœ‹æµå¹´å¤§è¿åˆ†æ
tail -300 logs/web_app_8001.log | grep -E "æµå¹´å¤§è¿|fortune_context|å¼€å§‹è®¡ç®—æµå¹´å¤§è¿|è·å–åˆ°æµå¹´åºåˆ—|åå¹´|2027|FortuneContextService"

# æŸ¥çœ‹æ€§èƒ½ç›‘æ§
tail -300 logs/web_app_8001.log | grep -E "PerformanceMonitor|æ€»è€—æ—¶|å„é˜¶æ®µè€—æ—¶"
```

---

### 3. å…¶ä»–å¾®æœåŠ¡æ—¥å¿—

| æœåŠ¡ | æ—¥å¿—æ–‡ä»¶ | ç«¯å£ |
|------|---------|------|
| å…«å­—æ ¸å¿ƒæœåŠ¡ | `logs/bazi_core_9001.log` | 9001 |
| è¿åŠ¿æœåŠ¡ | `logs/bazi_fortune_9002.log` | 9002 |
| å…«å­—åˆ†ææœåŠ¡ | `logs/bazi_analyzer_9003.log` | 9003 |
| è§„åˆ™åŒ¹é…æœåŠ¡ | `logs/bazi_rule_9004.log` | 9004 |
| è¿åŠ¿åˆ†ææœåŠ¡ | `logs/fortune_analysis_9005.log` | 9005 |
| æ”¯ä»˜æœåŠ¡ | `logs/payment_service_9006.log` | 9006 |
| è¿åŠ¿è§„åˆ™æœåŠ¡ | `logs/fortune_rule_9007.log` | 9007 |
| æ„å›¾è¯†åˆ«æœåŠ¡ | `logs/intent_service_9008.log` | 9008 |
| æç¤ºä¼˜åŒ–æœåŠ¡ | `logs/prompt_optimizer_9009.log` | 9009 |
| é£æ°´åˆ†ææœåŠ¡ | `logs/desk_fengshui_9010.log` | 9010 |

---

## ğŸ” å¸¸ç”¨æ—¥å¿—æŸ¥çœ‹å‘½ä»¤

### æŸ¥çœ‹æ„å›¾è¯†åˆ«ç›¸å…³æ—¥å¿—

```bash
# æŸ¥çœ‹æ„å›¾è¯†åˆ«æœåŠ¡æ—¥å¿—ï¼ˆå®æ—¶ï¼‰
tail -f logs/intent_service_9008.log

# æŸ¥çœ‹æ„å›¾è¯†åˆ«è¯¦ç»†æ—¥å¿—ï¼ˆå®æ—¶ï¼‰
tail -f logs/intent_service.log

# æŸ¥çœ‹æœ€è¿‘100æ¡æ„å›¾è¯†åˆ«æ—¥å¿—
tail -100 logs/intent_service.log

# æœç´¢ç‰¹å®šå…³é”®è¯ï¼ˆå¦‚"åå¹´"ï¼‰
tail -200 logs/intent_service.log | grep -E "åå¹´|specific_year|target_years|2027"
```

### æŸ¥çœ‹æ™ºèƒ½è¿åŠ¿åˆ†æç›¸å…³æ—¥å¿—

```bash
# æŸ¥çœ‹WebæœåŠ¡æ—¥å¿—ï¼ˆå®æ—¶ï¼‰
tail -f logs/web_app_8001.log

# æŸ¥çœ‹æ™ºèƒ½è¿åŠ¿åˆ†æè¯·æ±‚
tail -300 logs/web_app_8001.log | grep -E "smart-analyze"

# æŸ¥çœ‹æ—¶é—´æ„å›¾è¯†åˆ«
tail -300 logs/web_app_8001.log | grep -E "æ—¶é—´æ„å›¾è¯†åˆ«|target_years"

# æŸ¥çœ‹æµå¹´å¤§è¿åˆ†æ
tail -300 logs/web_app_8001.log | grep -E "æµå¹´å¤§è¿|fortune_context|å¼€å§‹è®¡ç®—æµå¹´å¤§è¿|è·å–åˆ°æµå¹´åºåˆ—|åå¹´|2027|FortuneContextService"

# æŸ¥çœ‹æ€§èƒ½ç›‘æ§
tail -300 logs/web_app_8001.log | grep -E "PerformanceMonitor|æ€»è€—æ—¶|å„é˜¶æ®µè€—æ—¶|æ€§èƒ½æ‘˜è¦"
```

### æŸ¥çœ‹é”™è¯¯æ—¥å¿—

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çš„é”™è¯¯æ—¥å¿—
grep -r "ERROR\|Exception\|Traceback" logs/*.log | tail -50

# æŸ¥çœ‹æ„å›¾è¯†åˆ«æœåŠ¡é”™è¯¯
grep -E "ERROR|Exception|Traceback" logs/intent_service_9008.log | tail -50

# æŸ¥çœ‹WebæœåŠ¡é”™è¯¯
grep -E "ERROR|Exception|Traceback" logs/web_app_8001.log | tail -50
```

---

## ğŸ“Š æ—¥å¿—åˆ†æç¤ºä¾‹

### åˆ†ææ„å›¾è¯†åˆ«æ€§èƒ½

```bash
# æŸ¥çœ‹æ„å›¾è¯†åˆ«è€—æ—¶åˆ†å¸ƒ
tail -500 logs/intent_service.log | grep "response_time_ms" | awk '{print $NF}' | sort -n | head -10
```

### åˆ†ææµå¹´å¤§è¿è·å–é—®é¢˜

```bash
# æŸ¥çœ‹æµå¹´å¤§è¿åˆ†æå®Œæ•´æµç¨‹
tail -500 logs/web_app_8001.log | grep -E "æ—¶é—´æ„å›¾è¯†åˆ«|target_years|æµå¹´å¤§è¿|fortune_context|å¼€å§‹è®¡ç®—æµå¹´å¤§è¿|è·å–åˆ°æµå¹´åºåˆ—|åå¹´|2027|calculate_detail_full|FortuneContextService" | tail -50
```

### åˆ†ææ€§èƒ½ç“¶é¢ˆ

```bash
# æŸ¥çœ‹æ€§èƒ½ç›‘æ§æ‘˜è¦
tail -500 logs/web_app_8001.log | grep -A 20 "æ€§èƒ½æ‘˜è¦"
```

---

## ğŸ“ æ—¥å¿—æ–‡ä»¶è¯´æ˜

### æ—¥å¿—æ ¼å¼

æ‰€æœ‰æ—¥å¿—æ–‡ä»¶ä½¿ç”¨æ ‡å‡†Python loggingæ ¼å¼ï¼š
```
YYYY-MM-DD HH:MM:SS - module_name - LEVEL - message
```

### æ—¥å¿—çº§åˆ«

- **DEBUG**: è¯¦ç»†è°ƒè¯•ä¿¡æ¯
- **INFO**: ä¸€èˆ¬ä¿¡æ¯ï¼ˆè¯·æ±‚ã€å“åº”ç­‰ï¼‰
- **WARNING**: è­¦å‘Šä¿¡æ¯ï¼ˆé™çº§ã€å›é€€ç­‰ï¼‰
- **ERROR**: é”™è¯¯ä¿¡æ¯ï¼ˆå¼‚å¸¸ã€å¤±è´¥ç­‰ï¼‰

### æ—¥å¿—è½®è½¬

æ—¥å¿—æ–‡ä»¶ä¼šæŒç»­å¢é•¿ï¼Œå»ºè®®å®šæœŸæ¸…ç†æˆ–ä½¿ç”¨æ—¥å¿—è½®è½¬å·¥å…·ï¼ˆå¦‚ `logrotate`ï¼‰ã€‚

---

## ğŸš€ å¿«é€Ÿå®šä½é—®é¢˜

### é—®é¢˜ï¼šæ„å›¾è¯†åˆ«å¾ˆæ…¢

```bash
# æŸ¥çœ‹æ„å›¾è¯†åˆ«è€—æ—¶
tail -200 logs/intent_service.log | grep -E "è€—æ—¶|response_time_ms" | tail -20
```

### é—®é¢˜ï¼šè·å–ä¸åˆ°å¤§è¿æµå¹´ä¿¡æ¯

```bash
# æŸ¥çœ‹æ—¶é—´æ„å›¾è¯†åˆ«
tail -200 logs/intent_service.log | grep -E "åå¹´|specific_year|target_years|2027"

# æŸ¥çœ‹æµå¹´å¤§è¿åˆ†æ
tail -300 logs/web_app_8001.log | grep -E "æµå¹´å¤§è¿|fortune_context|å¼€å§‹è®¡ç®—æµå¹´å¤§è¿|è·å–åˆ°æµå¹´åºåˆ—|åå¹´|2027|FortuneContextService"
```

### é—®é¢˜ï¼šæœåŠ¡å¯åŠ¨å¤±è´¥

```bash
# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
tail -100 logs/intent_service_startup.log
tail -100 logs/server_8001.log
```

---

## ğŸ“Œ é‡è¦æç¤º

1. **å®æ—¶æŸ¥çœ‹æ—¥å¿—**ï¼šä½¿ç”¨ `tail -f` å‘½ä»¤å®æ—¶æŸ¥çœ‹æ—¥å¿—
2. **æ—¥å¿—æ–‡ä»¶ä½ç½®**ï¼šæ‰€æœ‰æ—¥å¿—æ–‡ä»¶éƒ½åœ¨ `logs/` ç›®å½•ä¸‹
3. **æ—¥å¿—æ–‡ä»¶å‘½å**ï¼šæ ¼å¼ä¸º `æœåŠ¡å_ç«¯å£.log`ï¼ˆå¦‚ `intent_service_9008.log`ï¼‰
4. **æ—¥å¿—æ–‡ä»¶å¤§å°**ï¼šå®šæœŸæ£€æŸ¥æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œé¿å…å ç”¨è¿‡å¤šç£ç›˜ç©ºé—´

---

**æœ€åæ›´æ–°**ï¼š2025-12-02
