# AI助手操作规范

## 🎯 核心原则

> **用户的明确要求：**
> "每次修改完自动保存，不需要我确认，执行过程中不需要我点击确认，直接执行即可"

**这是最高优先级的规则，必须100%遵守！**

## ✅ 必须做的事情

### 1. 自动保存（强制）

```
修改代码 → 立即自动保存 → 不询问用户
```

- ✅ 修改完代码后**立即自动保存**
- ✅ 使用工具的自动保存功能
- ❌ **绝不**询问"是否保存"
- ❌ **绝不**等待用户确认

### 2. 自动执行（强制）

```
保存后 → 自动执行所有步骤 → 不询问用户
```

**完整流程（全自动）：**

```bash
# 步骤1：修改代码
修改文件 → 自动保存

# 步骤2：自动检查语法
python3 -m py_compile <file>

# 步骤3：自动重启服务
./restart_server.sh

# 步骤4：自动测试
sleep 5
curl http://127.0.0.1:8001/health

# 步骤5：自动验证功能
python3 test_frontend_display.py

# 步骤6：报告结果
echo "✅ 所有步骤完成"
```

**关键点：**
- ✅ 所有步骤自动执行
- ✅ 失败时立即停止并报告
- ✅ 成功时自动继续
- ❌ **绝不**询问用户
- ❌ **绝不**等待确认

### 3. 报告结果（自动）

**执行完成后自动报告：**

```markdown
✅ 修改完成
✅ 已自动保存
✅ 语法检查通过
✅ 服务已重启
✅ 功能测试通过

【修改的文件】
- file1.py
- file2.py

【测试结果】
- API正常
- 前端正常
```

## ❌ 绝对禁止的行为

### 1. 禁止询问用户

```
❌ "是否保存文件？"
❌ "是否继续执行？"
❌ "请确认..."
❌ "是否要重启服务？"
❌ 任何形式的确认对话框
```

**正确做法：直接执行！**

### 2. 禁止等待用户

```
❌ 等待用户输入
❌ 等待用户点击
❌ 等待用户确认
❌ 暂停等待用户操作
```

**正确做法：自动继续！**

### 3. 禁止手动操作提示

```
❌ "请手动保存文件"
❌ "请手动重启服务"
❌ "请手动测试"
❌ "请运行..."
```

**正确做法：自动执行，然后报告结果！**

## 📋 标准操作流程

### 场景1：修改代码

```python
# 1. 修改代码
# （使用工具修改）

# 2. 自动保存（不询问）
# （工具自动保存）

# 3. 自动检查语法
run_terminal_cmd("python3 -m py_compile file.py")

# 4. 自动重启服务
run_terminal_cmd("./restart_server.sh")

# 5. 自动测试
run_terminal_cmd("curl http://127.0.0.1:8001/health")

# 6. 报告结果
"✅ 修改完成并验证通过"
```

### 场景2：修复Bug

```python
# 1. 定位问题
# 2. 修改代码（自动保存）
# 3. 自动检查语法
# 4. 自动重启服务
# 5. 自动测试
# 6. 自动验证修复
# 7. 报告结果

# 全程自动，不需要用户参与
```

### 场景3：添加新功能

```python
# 1. 创建/修改文件（自动保存）
# 2. 自动检查语法
# 3. 自动重启服务
# 4. 自动测试新功能
# 5. 自动回归测试
# 6. 报告结果

# 全程自动，不需要用户参与
```

## 🚀 最佳实践

### 1. 批量操作也要自动

```python
# 修改多个文件时
for file in files:
    modify(file)  # 自动保存
    check_syntax(file)  # 自动检查

restart_service()  # 自动重启
run_tests()  # 自动测试
report_results()  # 自动报告
```

### 2. 错误处理也要自动

```python
try:
    modify_and_save()  # 自动
    check_syntax()  # 自动
    restart_service()  # 自动
    run_tests()  # 自动
except Error as e:
    # 自动回滚
    rollback()
    # 自动报告错误
    report_error(e)
    # 不询问用户，直接处理
```

### 3. 验证也要自动

```python
# 修改后自动验证
modify_code()  # 自动保存
verify_syntax()  # 自动检查
verify_service()  # 自动验证服务
verify_functionality()  # 自动验证功能

# 全程自动
```

## 📝 沟通规范

### 正确的沟通方式

```markdown
✅ "我已经修改了代码并自动保存"
✅ "自动检查语法通过"
✅ "服务已自动重启"
✅ "功能测试自动通过"
✅ "所有步骤已自动完成"
```

### 错误的沟通方式

```markdown
❌ "代码已修改，请确认是否保存"
❌ "是否要我重启服务？"
❌ "请您手动测试一下"
❌ "需要您确认..."
❌ "等待您的指示..."
```

## 🎯 执行检查清单

在执行任何操作时，确认：

- [ ] 修改代码后自动保存了吗？
- [ ] 自动执行了语法检查吗？
- [ ] 自动重启了服务吗？
- [ ] 自动运行了测试吗？
- [ ] 自动验证了功能吗？
- [ ] 向用户报告结果了吗？
- [ ] 全程没有询问用户吗？
- [ ] 全程没有等待确认吗？

**如果有任何一项是"否"，说明操作不符合规范！**

## 🔥 铁律

### 铁律1：自动保存
**修改代码后立即自动保存，绝不询问用户！**

### 铁律2：自动执行
**所有操作自动执行，绝不等待用户确认！**

### 铁律3：自动报告
**完成后自动报告结果，不需要用户主动询问！**

### 铁律4：遵守用户指令
**用户说"不需要确认"，就绝对不要确认！**

## 💡 示例对话

### ❌ 错误示例

```
用户：修改这个文件
AI：我已经修改了，是否要保存？
```

**错误：询问用户是否保存**

### ✅ 正确示例

```
用户：修改这个文件
AI：✅ 已修改并自动保存
    ✅ 语法检查通过
    ✅ 服务已重启
    ✅ 测试通过
    
    修改的文件：file.py
```

**正确：全自动，直接报告结果**

---

## 📌 记住

> **用户的要求是：**
> "每次修改完自动保存，不需要我确认，执行过程中不需要我点击确认，直接执行即可"

**这不是建议，这是命令！必须100%遵守！**

---

**创建时间**: 2025-11-21  
**优先级**: 🔥 最高  
**状态**: 强制执行

