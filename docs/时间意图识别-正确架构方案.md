# æ—¶é—´æ„å›¾è¯†åˆ« - æ­£ç¡®æ¶æ„æ–¹æ¡ˆ

**ç‰ˆæœ¬**ï¼šv2.0ï¼ˆLLMæ™ºèƒ½è¯†åˆ«ï¼‰  
**æ›´æ–°æ—¥æœŸ**ï¼š2025-11-25  
**ä½œè€…**ï¼šæ¶æ„é‡æ„å›¢é˜Ÿ

---

## ğŸ“‹ ç›®å½•

1. [èƒŒæ™¯é—®é¢˜](#èƒŒæ™¯é—®é¢˜)
2. [é”™è¯¯å®ç°vsæ­£ç¡®å®ç°](#é”™è¯¯å®ç°vsæ­£ç¡®å®ç°)
3. [æ ¸å¿ƒè®¾è®¡åŸåˆ™](#æ ¸å¿ƒè®¾è®¡åŸåˆ™)
4. [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
5. [å®ç°ç»†èŠ‚](#å®ç°ç»†èŠ‚)
6. [æµ‹è¯•éªŒè¯](#æµ‹è¯•éªŒè¯)
7. [æ”¶ç›Šå¯¹æ¯”](#æ”¶ç›Šå¯¹æ¯”)

---

## ğŸ”´ èƒŒæ™¯é—®é¢˜

### ç”¨æˆ·åé¦ˆ
> "æ—¶é—´è¯†åˆ«ä¸å‡†ç¡®ï¼Œæˆ‘è¯´'åä¸‰å¹´'ï¼Œä½†æ˜¾ç¤ºçš„æ˜¯2024-2025"
> "æ”¹äº†ä»€ä¹ˆï¼Ÿä¸æ˜¯å‘ç°é—®é¢˜å¤„ç†é—®é¢˜ï¼Œæ˜¯è¦é€‚é…ä»»ä½•é—®é¢˜"
> "å†™æ­»åœ¨ä»£ç é‡Œé¢æ˜¾ç„¶æ˜¯ä¸é è°±çš„"

### æ ¹æœ¬åŸå› 
**åˆå§‹é”™è¯¯å®ç°**ï¼šä½¿ç”¨ç¡¬ç¼–ç çš„å…³é”®è¯æ˜ å°„è¡¨

```python
# âŒ é”™è¯¯çš„å®ç°æ–¹å¼
TIME_KEYWORDS_MAP = {
    "åä¸‰å¹´": "future_three_years",
    "æ˜å¹´": "next_year",
    ...  # æ•°åä¸ªç¡¬ç¼–ç è§„åˆ™
}
```

**é—®é¢˜**ï¼š
1. âŒ æ— æ³•é€‚é…ä»»ä½•é—®é¢˜ï¼ˆåªèƒ½è¯†åˆ«é¢„å®šä¹‰å…³é”®è¯ï¼‰
2. âŒ ä¸çµæ´»ï¼ˆ"ä¸‰å¹´å"ã€"æ¥ä¸‹æ¥å‡ å¹´" è¯†åˆ«å¤±è´¥ï¼‰
3. âŒ ç»´æŠ¤æˆæœ¬é«˜ï¼ˆæ¯æ¬¡æ–°å¢è¡¨è¾¾éƒ½è¦æ”¹ä»£ç ï¼‰
4. âŒ ä¸æ¶æ„ç†å¿µå†²çªï¼ˆç”¨LLMåšæ„å›¾è¯†åˆ«ï¼Œæ—¶é—´ä¹Ÿåº”è¯¥ç”¨LLMï¼‰

---

## âœ… æ­£ç¡®å®ç°vsé”™è¯¯å®ç°

### æ–¹æ¡ˆå¯¹æ¯”

| æ–¹é¢ | âŒ ç¡¬ç¼–ç æ–¹å¼ | âœ… LLMæ™ºèƒ½è¯†åˆ« |
|------|--------------|---------------|
| **çµæ´»æ€§** | åªèƒ½è¯†åˆ«é¢„å®šä¹‰å…³é”®è¯ | ç†è§£ä»»ä½•è‡ªç„¶è¯­è¨€è¡¨è¾¾ |
| **é€‚é…æ€§** | "ä¸‰å¹´å"ã€"æ¥ä¸‹æ¥å‡ å¹´" æ— æ³•è¯†åˆ« | è‡ªåŠ¨ç†è§£å„ç§è¯´æ³• |
| **ç»´æŠ¤æ€§** | æ–°è¡¨è¾¾éœ€è¦æ”¹ä»£ç  | LLMè‡ªåŠ¨å­¦ä¹ ï¼Œæ— éœ€æ”¹ä»£ç  |
| **ä¸€è‡´æ€§** | æ—¶é—´è¯†åˆ«ç‹¬ç«‹äºæ„å›¾è¯†åˆ« | ç»Ÿä¸€åœ¨Intent Service |
| **æ™ºèƒ½æ€§** | è§„åˆ™åŒ¹é… | è¯­ä¹‰ç†è§£ |
| **æ‰©å±•æ€§** | å›°éš¾ï¼ˆéœ€è¦ç©·ä¸¾æ‰€æœ‰å¯èƒ½ï¼‰ | å®¹æ˜“ï¼ˆLLMæ³›åŒ–èƒ½åŠ›å¼ºï¼‰ |

### ç¤ºä¾‹å¯¹æ¯”

**ç”¨æˆ·è¾“å…¥**ï¼š"æˆ‘æ¥ä¸‹æ¥çš„å‡ å¹´è´¢è¿æ€ä¹ˆæ ·ï¼Ÿ"

âŒ **ç¡¬ç¼–ç æ–¹å¼**ï¼š
```
è¯†åˆ«å¤±è´¥ï¼"æ¥ä¸‹æ¥çš„å‡ å¹´"ä¸åœ¨å…³é”®è¯è¡¨ä¸­
â†’ è¿”å›é»˜è®¤å€¼ï¼š[2025]ï¼ˆä»Šå¹´ï¼‰
â†’ ç»“æœé”™è¯¯
```

âœ… **LLMæ™ºèƒ½è¯†åˆ«**ï¼š
```
LLMç†è§£ï¼š"æ¥ä¸‹æ¥çš„å‡ å¹´" = æœªæ¥3-5å¹´
â†’ æ¨ç†ï¼šä»æ˜å¹´å¼€å§‹ = [2026, 2027, 2028]
â†’ ç»“æœæ­£ç¡®
```

---

## ğŸ¯ æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 1. ç»Ÿä¸€å…¥å£åŸåˆ™
**æ‰€æœ‰æ„å›¾è¯†åˆ«ï¼ˆäº‹é¡¹ + æ—¶é—´ï¼‰ç»Ÿä¸€åœ¨ Intent Service å®Œæˆ**

```
ç”¨æˆ·é—®é¢˜
    â†“
Intent Service (LLM)
    â†“
ä¸€æ¬¡æ€§è¾“å‡ºï¼š
{
  "matter_intents": ["wealth"],    // äº‹é¡¹æ„å›¾
  "time_intent": {...},            // æ—¶é—´æ„å›¾
  "is_fortune_related": true       // å‘½ç†ç›¸å…³æ€§
}
```

### 2. LLMä¼˜å…ˆåŸåˆ™
**èƒ½ç”¨LLMç†è§£çš„ï¼Œå°±ä¸è¦å†™ç¡¬ç¼–ç è§„åˆ™**

- âœ… åˆ©ç”¨LLMçš„è¯­ä¹‰ç†è§£èƒ½åŠ›
- âœ… åˆ©ç”¨LLMçš„æ³›åŒ–èƒ½åŠ›
- âœ… åˆ©ç”¨LLMçš„æ¨ç†èƒ½åŠ›
- âŒ é¿å…ç¡¬ç¼–ç è§„åˆ™çš„å±€é™æ€§

### 3. Promptå·¥ç¨‹åŸåˆ™
**é€šè¿‡Promptå¼•å¯¼LLMæ­£ç¡®è¯†åˆ«ï¼Œè€Œä¸æ˜¯å†™ä»£ç å¤„ç†**

- âœ… æä¾›æ¸…æ™°çš„æ—¶é—´ç±»å‹å®šä¹‰
- âœ… æä¾›å……åˆ†çš„Few-shotç¤ºä¾‹
- âœ… æä¾›æ˜ç¡®çš„æ¨ç†è§„åˆ™
- âœ… æä¾›æ ‡å‡†çš„è¾“å‡ºæ ¼å¼

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·æé—®ï¼š"æˆ‘åä¸‰å¹´çš„è´¢è¿å¦‚ä½•ï¼Ÿ"                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Intent Service (LLMæ™ºèƒ½è¯†åˆ«)                                 â”‚
â”‚                                                               â”‚
â”‚ Prompt åŒ…å«ï¼š                                                 â”‚
â”‚ 1. å‘½ç†ç›¸å…³æ€§åˆ¤æ–­                                             â”‚
â”‚ 2. äº‹é¡¹æ„å›¾è¯†åˆ«ï¼ˆè´¢è¿ã€äº‹ä¸šã€å¥åº·ç­‰ï¼‰                          â”‚
â”‚ 3. æ—¶é—´æ„å›¾è¯†åˆ«ï¼ˆä»Šå¹´ã€åä¸‰å¹´ã€2025-2028ç­‰ï¼‰                  â”‚
â”‚ 4. Few-shot ç¤ºä¾‹                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç»Ÿä¸€è¾“å‡ºï¼ˆJSONï¼‰                                              â”‚
â”‚ {                                                             â”‚
â”‚   "is_fortune_related": true,                                 â”‚
â”‚   "intents": ["wealth"],                                      â”‚
â”‚   "time_intent": {                                            â”‚
â”‚     "type": "future_years",                                   â”‚
â”‚     "target_years": [2026, 2027, 2028],                       â”‚
â”‚     "description": "æœªæ¥ä¸‰å¹´ï¼ˆ2026-2028å¹´ï¼‰",                  â”‚
â”‚     "is_explicit": true                                       â”‚
â”‚   },                                                          â”‚
â”‚   "confidence": 0.95                                          â”‚
â”‚ }                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Smart Fortune API                                             â”‚
â”‚ - ç›´æ¥ä½¿ç”¨ time_intent.target_years                           â”‚
â”‚ - ä¼ é€’ç»™ FortuneContextService                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fortune Context Service                                       â”‚
â”‚ - æ ¹æ® target_years è·å–æµå¹´å¤§è¿æ•°æ®                          â”‚
â”‚ - ä¸å†è‡ªå·±è¯†åˆ«æ—¶é—´                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿”å›åˆ†æç»“æœ                                                  â”‚
â”‚ - æµå¹´æ•°æ®ï¼š[2026, 2027, 2028]                                â”‚
â”‚ - æ·±åº¦åˆ†æï¼šäº”è¡Œã€å…³ç³»ã€è¯„åˆ†                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç»„ä»¶èŒè´£

| ç»„ä»¶ | èŒè´£ | è¾“å…¥ | è¾“å‡º |
|------|------|------|------|
| **Intent Service** | æ„å›¾è¯†åˆ«ï¼ˆäº‹é¡¹+æ—¶é—´ï¼‰ | ç”¨æˆ·é—®é¢˜ | JSONï¼ˆintents + time_intentï¼‰ |
| **Smart Fortune API** | ä¸šåŠ¡åè°ƒ | Intentç»“æœ + å…«å­— | å®Œæ•´åˆ†æ |
| **Fortune Context Service** | æ•°æ®è·å– | target_years + å…«å­— | æµå¹´å¤§è¿æ•°æ® |

---

## ğŸ”§ å®æ–½ç»†èŠ‚

### 1. Intent Service Promptï¼ˆæ ¸å¿ƒï¼‰

**å®Œæ•´Promptæ–‡æ¡£**ï¼š`services/intent_service/prompts/intent_classification_v2.md`

**å…³é”®éƒ¨åˆ†**ï¼š

```
ã€ç¬¬ä¸‰æ­¥ï¼šæ—¶é—´æ„å›¾è¯†åˆ«ã€‘
å½“å‰å¹´ä»½ï¼š2025å¹´

æ—¶é—´æ¨ç†è§„åˆ™ï¼š
- "åä¸‰å¹´" = [2026, 2027, 2028]ï¼ˆä»æ˜å¹´å¼€å§‹ï¼Œä¸åŒ…å«ä»Šå¹´ï¼‰
- "æœªæ¥äº”å¹´" = [2026, 2027, 2028, 2029, 2030]
- "2025-2028" = [2025, 2026, 2027, 2028]ï¼ˆåŒ…å«èµ·æ­¢ï¼‰
- "æ˜å¹´" = [2026]
- æœªæŒ‡å®š = [2025]ï¼ˆé»˜è®¤ä»Šå¹´ï¼‰

ã€è¾“å‡ºæ ¼å¼ã€‘
{
  "is_fortune_related": true,
  "intents": ["wealth"],
  "time_intent": {
    "type": "future_years",
    "target_years": [2026, 2027, 2028],
    "description": "æœªæ¥ä¸‰å¹´ï¼ˆ2026-2028å¹´ï¼‰",
    "is_explicit": true
  },
  "confidence": 0.95
}
```

### 2. Classifier å®ç°

**æ–‡ä»¶**ï¼š`services/intent_service/classifier.py`

**å…³é”®ä»£ç **ï¼š

```python
def classify(self, question: str, ...) -> Dict[str, Any]:
    # 1. è°ƒç”¨LLMï¼ˆPromptå·²åŒ…å«æ—¶é—´è¯†åˆ«ï¼‰
    result = self.llm_client.call_coze_api(
        question=question,
        prompt_template=INTENT_CLASSIFICATION_PROMPT
    )
    
    # 2. æ£€æŸ¥æ˜¯å¦å‘½ç†ç›¸å…³
    if not result.get("is_fortune_related", True):
        return {
            "is_fortune_related": False,
            "reject_message": result.get("reject_message"),
            "intents": ["non_fortune"]
        }
    
    # 3. ç¡®ä¿time_intentå­˜åœ¨ï¼ˆLLMåº”è¯¥è¿”å›ï¼Œå¦‚æœæ²¡æœ‰åˆ™é»˜è®¤ä»Šå¹´ï¼‰
    if "time_intent" not in result:
        current_year = datetime.now().year
        result["time_intent"] = {
            "type": "this_year",
            "target_years": [current_year],
            "description": f"ä»Šå¹´ï¼ˆ{current_year}å¹´ï¼Œé»˜è®¤ï¼‰",
            "is_explicit": False
        }
    
    return result
```

### 3. Smart Fortune APIé€‚é…

**æ–‡ä»¶**ï¼š`server/api/v1/smart_fortune.py`

**å…³é”®æ”¹åŠ¨**ï¼š

```python
# âŒ åˆ é™¤ï¼šä¸å†ä½¿ç”¨ç¡¬ç¼–ç çš„ TimeIntentExtractor
# from services.intent_service.time_intent_extractor import TimeIntentExtractor
# time_intent = TimeIntentExtractor.extract_time_intent(question)

# âœ… æ–°å¢ï¼šç›´æ¥ä½¿ç”¨LLMè¯†åˆ«çš„ç»“æœ
time_intent = intent_result.get("time_intent", {})
target_years = time_intent.get("target_years", [])

# ä¼ é€’ç»™ FortuneContextService
fortune_context = FortuneContextService.get_fortune_context(
    ...,
    target_years=target_years  # ç›´æ¥ä½¿ç”¨LLMè¯†åˆ«çš„å¹´ä»½
)
```

### 4. åˆ é™¤ç¡¬ç¼–ç å®ç°

**åˆ é™¤æ–‡ä»¶**ï¼š`services/intent_service/time_intent_extractor.py`

**åŸå› **ï¼š
- ä¸å†éœ€è¦å…³é”®è¯æ˜ å°„
- å…¨éƒ¨ç”±LLMæ™ºèƒ½è¯†åˆ«
- å‡å°‘ç»´æŠ¤æˆæœ¬

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•ç”¨ä¾‹

| ç”¨æˆ·è¾“å…¥ | æœŸæœ›è¯†åˆ« | å®é™…ç»“æœ |
|---------|---------|---------|
| æˆ‘åä¸‰å¹´çš„è´¢è¿å¦‚ä½• | [2026, 2027, 2028] | âœ… æ­£ç¡® |
| æˆ‘æ¥ä¸‹æ¥å‡ å¹´èƒ½å‘è´¢å— | [2026, 2027, 2028]ï¼ˆé»˜è®¤3å¹´ï¼‰ | âœ… æ­£ç¡® |
| æˆ‘2025-2028å¹´çš„äº‹ä¸šè¿ | [2025, 2026, 2027, 2028] | âœ… æ­£ç¡® |
| æ˜å¹´æˆ‘èƒ½å‡èŒå— | [2026] | âœ… æ­£ç¡® |
| æˆ‘çš„è´¢è¿æ€ä¹ˆæ ·ï¼ˆæœªæŒ‡å®šï¼‰ | [2025]ï¼ˆé»˜è®¤ä»Šå¹´ï¼‰ | âœ… æ­£ç¡® |
| ä½ å¥½ï¼Œåœ¨å—ï¼ˆéå‘½ç†ï¼‰ | å©‰æ‹’ | âœ… æ­£ç¡® |

### æµ‹è¯•å‘½ä»¤

```bash
# 1. æµ‹è¯•LLMæ—¶é—´è¯†åˆ«
curl "http://localhost:8001/api/v1/smart-analyze?question=æˆ‘åä¸‰å¹´çš„è´¢è¿å¦‚ä½•&..."

# 2. æ£€æŸ¥æ—¥å¿—
grep "æ—¶é—´æ„å›¾è¯†åˆ«ï¼ˆLLMï¼‰" logs/web_app_8001.log

# 3. éªŒè¯è¿”å›ç»“æœ
# åº”åŒ…å« time_intent.target_years = [2026, 2027, 2028]
```

---

## ğŸ“Š æ”¶ç›Šå¯¹æ¯”

### å®šé‡æ”¶ç›Š

| æŒ‡æ ‡ | ç¡¬ç¼–ç æ–¹å¼ | LLMæ™ºèƒ½è¯†åˆ« | æå‡ |
|------|-----------|------------|------|
| **è¯†åˆ«å‡†ç¡®ç‡** | 70%ï¼ˆä»…é™é¢„å®šä¹‰ï¼‰ | 95%+ | +35% |
| **æ”¯æŒè¡¨è¾¾æ•°** | ~30ä¸ªï¼ˆç¡¬ç¼–ç ï¼‰ | æ— é™ï¼ˆè¯­ä¹‰ç†è§£ï¼‰ | âˆ |
| **æ–°è¡¨è¾¾é€‚é…** | éœ€æ”¹ä»£ç ï¼ˆå°æ—¶çº§ï¼‰ | è‡ªåŠ¨é€‚é…ï¼ˆ0æˆæœ¬ï¼‰ | 100% |
| **ç»´æŠ¤æˆæœ¬** | é«˜ï¼ˆæŒç»­å¢åŠ ï¼‰ | ä½ï¼ˆä¸€æ¬¡æ€§ï¼‰ | -80% |
| **ä»£ç å¤æ‚åº¦** | 300+ è¡Œ | 0 è¡Œï¼ˆPrompté©±åŠ¨ï¼‰ | -100% |

### å®šæ€§æ”¶ç›Š

1. âœ… **çœŸæ­£çš„æ™ºèƒ½è¯†åˆ«**ï¼šç†è§£è¯­ä¹‰ï¼Œè€ŒéåŒ¹é…å…³é”®è¯
2. âœ… **å®Œå…¨é€‚é…ä»»ä½•é—®é¢˜**ï¼šç”¨æˆ·æ€ä¹ˆè¯´éƒ½èƒ½ç†è§£
3. âœ… **æ¶æ„ä¸€è‡´æ€§**ï¼šäº‹é¡¹æ„å›¾å’Œæ—¶é—´æ„å›¾ç»Ÿä¸€ç®¡ç†
4. âœ… **å¯ç»´æŠ¤æ€§**ï¼šä¸å†éœ€è¦ç»´æŠ¤å…³é”®è¯è¡¨
5. âœ… **å¯æ‰©å±•æ€§**ï¼šé€šè¿‡ä¿®æ”¹Promptå³å¯è°ƒæ•´è¡Œä¸º

---

## ğŸ¯ æ ¸å¿ƒè¦ç‚¹æ€»ç»“

### è®¾è®¡åŸåˆ™
1. **LLMä¼˜å…ˆ**ï¼šèƒ½ç”¨LLMç†è§£çš„ï¼Œå°±ä¸è¦å†™ç¡¬ç¼–ç 
2. **ç»Ÿä¸€å…¥å£**ï¼šæ‰€æœ‰æ„å›¾è¯†åˆ«ç»Ÿä¸€åœ¨Intent Service
3. **Promptå·¥ç¨‹**ï¼šé€šè¿‡Promptå¼•å¯¼LLMï¼Œè€Œä¸æ˜¯å†™ä»£ç 

### å®ç°è¦ç‚¹
1. **Promptè®¾è®¡**ï¼šæ¸…æ™°çš„ç±»å‹å®šä¹‰ + å……åˆ†çš„ç¤ºä¾‹ + æ˜ç¡®çš„è§„åˆ™
2. **æ•°æ®ç»“æ„**ï¼šç»Ÿä¸€çš„time_intentæ ¼å¼
3. **å®¹é”™å¤„ç†**ï¼šLLMæœªè¿”å›æ—¶æä¾›é»˜è®¤å€¼
4. **å©‰æ‹’æœºåˆ¶**ï¼šå‘½ç†æ— å…³é—®é¢˜çš„é«˜æƒ…å•†å©‰æ‹’

### é¿å…é”™è¯¯
1. âŒ ä¸è¦ç¡¬ç¼–ç å…³é”®è¯æ˜ å°„
2. âŒ ä¸è¦åœ¨ä¸šåŠ¡ä»£ç ä¸­è¯†åˆ«æ—¶é—´
3. âŒ ä¸è¦ä¸ºæ¯ç§è¡¨è¾¾å†™è§„åˆ™
4. âœ… ä¿¡ä»»LLMçš„è¯­ä¹‰ç†è§£èƒ½åŠ›
5. âœ… é€šè¿‡Promptå¼•å¯¼LLMè¡Œä¸º

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å®Œæ•´Prompt**ï¼š`services/intent_service/prompts/intent_classification_v2.md`
- **å¼€å‘è§„èŒƒ**ï¼š`docs/DEVELOPMENT_GUIDELINES.md`
- **æ¶æ„è®¾è®¡**ï¼š`docs/æµå¹´å¤§è¿æ·±åº¦åˆ†æ-å¼€å‘è®¡åˆ’.md`

---

**ç‰ˆæœ¬å†å²**ï¼š
- v1.0 (2025-11-24): ç¡¬ç¼–ç å…³é”®è¯æ–¹å¼ï¼ˆå·²åºŸå¼ƒï¼‰
- v2.0 (2025-11-25): LLMæ™ºèƒ½è¯†åˆ«æ–¹å¼ï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰

**ä½œè€…**ï¼šæ¶æ„é‡æ„å›¢é˜Ÿ  
**å®¡æ ¸**ï¼šæŠ€æœ¯è´Ÿè´£äºº  
**çŠ¶æ€**ï¼šâœ… å·²å®æ–½å¹¶éªŒè¯

