# Cursor 高级功能与端到端能力指南

> 重点：提高效率 + 从设计/原型到部署上线的全流程能力。每天学一点。

---

## 一、按端到端流程：你可能还没用上的能力

### 1. 设计 / 原型阶段

| 能力 | 说明 | 效率点 |
|------|------|--------|
| **MCP 图像生成** | 用 `GenerateImage` 根据文字描述生成 UI 草图、图标、简单原型图 | 不用切到 Figma 就能快速出视觉参考 |
| **自然语言 → 设计产出** | 在对话里写「生成 ER 图 / 组件树 / API 设计」，让 AI 生成 Mermaid/文档 | 需求到设计文档一步到位 |
| **@ 引用文档/规范** | 用 `@standards/README.md`、`@deploy.mdc` 把设计/规范拉进对话 | 设计不脱离现有规范 |

项目里已有 `@deploy.mdc`、`@orchestrator-rules.mdc` 等，可以再加「设计阶段也 @ 这些」的习惯。

---

### 2. 开发阶段（提效重点）

| 能力 | 说明 | 效率点 |
|------|------|--------|
| **Composer 多文件编辑** | 一个需求描述，让 AI 同时改多个文件（路由、schema、校验、测试） | 做 feature 比单文件 Cmd+K 快很多 |
| **Agent 模式** | `Cmd+.` / `Ctrl+.` 切换：Agent 可执行终端、多轮改代码；Ask 只读理解代码 | 复杂重构/排查用 Agent，理解用 Ask |
| **Plan 模式** | 先让 AI 拆成「实现计划」再执行，适合大功能 | 减少漏步骤、返工 |
| **Cmd+K 单文件快改** | 选中代码 + 自然语言，只改当前文件 | 约 70% 小改动用这个就够 |
| **@ 符号** | `@文件名`、`@文件夹`、`@Codebase`、`@Web` 把上下文喂给 AI | 回答更贴项目、更少瞎猜 |
| **Background Agents**（若版本支持） | 后台异步跑任务、自动 PR | 不占着当前对话，多任务并行 |

项目里「文件拆分用 shell」已写进规则，可要求 AI：**多文件改动用 Composer/Agent，单文件用 Cmd+K**。

---

### 3. 测试 / 验证阶段

| 能力 | 说明 | 效率点 |
|------|------|--------|
| **Debug 模式** | 针对报错做根因分析、假设、运行分析 | 修 bug 更有条理 |
| **MCP 浏览器** | `cursor-ide-browser` 等：自动打开页面、点击、填表、截图 | 端到端验证前端/部署结果 |
| **自动跑测试** | 在 Agent 里开启「自动运行终端命令」，让 AI 自己跑测试/构建并迭代 | 改完即测，减少手动跑 |

已有 `api_regression_test.py` 等，可以说「改完后用 Agent 跑一遍 regression，再告诉我结果」。

---

### 4. 部署 / 上线阶段

| 能力 | 说明 | 效率点 |
|------|------|--------|
| **规则触发词** | 如「芝麻开门」→ 执行 `gated_deploy.sh`，无需每次敲命令 | 已在使用，可扩展到「测试」「热更新」等 |
| **@deploy.mdc 全程参与** | 从「改 compose/脚本」到「执行部署」前都 @ 部署规则 | 避免和现有门控/零停机冲突 |
| **CI 配置生成** | 让 AI 根据项目生成/调整 GitHub Actions 等 | 从设计到部署的「最后一公里」自动化 |

---

## 二、「每天学一点」7 天小计划（偏效率 + 端到端）

每天只练一个点，用当前项目或一个小需求即可。

| 天 | 主题 | 具体动作 |
|----|------|----------|
| **Day 1** | **Composer 做一个小 feature** | 开 Composer，用一句话描述一个小需求（例如「在 XX 页加一个筛选条件并接好接口」），看 AI 如何一次改多文件；对比以前单文件改的时间。 |
| **Day 2** | **Agent / Ask / Plan 切换** | 用 `Cmd+.` 切到 Plan，让 AI 先给「实现步骤」再执行；再切 Ask 问「这段代码在干什么」。 |
| **Day 3** | **@ 引用练熟** | 在对话里用 `@standards/README.md`、`@grpc-rules.mdc`、`@server/api/grpc_gateway.py` 问一个具体问题，对比不 @ 时的回答质量。 |
| **Day 4** | **MCP 图像生成** | 让 AI 根据一句描述生成一张简单 UI 草图或图标，体会「从想法到图」的路径。 |
| **Day 5** | **MCP 浏览器验证** | 用 MCP 浏览器打开本地/测试环境页面，让 AI 执行一次「点击 → 填表 → 检查结果」的流程。 |
| **Day 6** | **Debug 模式修一个真实 bug** | 遇到一个报错时，用 Debug 模式让 AI 做根因分析和改法建议，你只负责确认和提交。 |
| **Day 7** | **端到端串起来** | 选一个很小需求：用自然语言出设计/接口约定 → Composer 实现 → Agent 跑测试 → 用「芝麻开门」或现有流程部署；全程尽量用 @ 规则、少改核心文件。 |

---

## 三、结合当前项目可以立刻做的 3 件事

1. **把「设计阶段」也写进规则**  
   在 `.cursorrules` 或新 rule 里加一句：做新功能前先 @ 相关规范，设计/接口要符合 `standards/` 和 gRPC 约定。

2. **固定「大改动用 Composer/Plan」**  
   在规则里写：多文件、新接口、新页面 → 优先用 Composer 或先 Plan 再执行。

3. **测试/部署前必 @**  
   部署或跑全量测试前，要求 AI 必须 @ `deploy.mdc` 或 `dev-checklist.mdc`，避免漏步骤或违反门控。

---

## 四、Day 1 示例提示词（可直接在 Cursor 里用）

选一个小需求后，在 Composer 里输入类似：

```
请用 Composer 多文件编辑完成：在 [具体页面/模块] 增加 [具体功能，如筛选条件]，并接好后端接口。
约束：
- @standards/README.md 与 @grpc-rules.mdc 的约定要遵守；
- 不要改 core/、server/engines/、server/services/ 核心逻辑；
- 完成后说明改了哪些文件，以及如何自测。
```

验收：看 AI 是否一次改了多个文件（前端组件 + 接口调用 + 必要时 proto/gateway），并给出可执行的验证步骤。
