# 面相手相八字分析与办公室摆件推荐服务架构

## 模块拆分

- `api/`：FastAPI 路由层，提供面相、手相、八字、风水推荐的接口。
- `services/`：业务逻辑层，负责调用模型、计算特征、执行规则引擎、拼装报告。
- `engines/`：规则配置文件，描述面相、手相、风水与融合逻辑（待补充）。
- `models/`：第三方算法模型与 SDK 的适配层。
- `data/`：样例数据、训练素材与静态资源。
- `reports/`：报告模板与生成结果存放路径。

## 处理流程

1. 用户通过 FastAPI 接口上传面部/手掌图像，并提供生日信息。
2. `services.face_service`、`services.hand_service`、`services.bazi_service` 并行执行：
   - 面相：调用人脸检测模型获取关键点及属性，计算三停、五官比例，并套用面相规则。
   - 手相：利用手部关键点模型和图像处理识别掌纹特征，套用手相规则。
   - 八字：复用项目已有的八字工具生成命盘，提取五行喜忌与运势摘要。
3. `services.recommendation_service` 基于以上结果给出办公室摆件建议。
4. `services.report_service` 将分析结果整合为统一报告输出。

## 开发重点

- 封装可替换的模型接口（支持本地模型或第三方 API）。
- 规则文件存于 `engines/`，便于非程序人员维护。
- 提供异步任务与缓存机制，优化图片处理性能。
- 报告层支持 JSON/Markdown/PDF 多种输出格式。

