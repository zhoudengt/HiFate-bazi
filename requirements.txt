# === HiFate-bazi 核心依赖 ===
# 精简版本，优化构建速度

# Web 框架
fastapi==0.104.1
uvicorn==0.23.2
starlette==0.27.0
python-multipart==0.0.6

# 数据库
PyMySQL==1.1.2
SQLAlchemy==2.0.25
redis==7.0.1
pymongo==4.6.1  # MongoDB支持（用户交互数据存储）

# HTTP 客户端
httpx==0.28.1
requests==2.31.0
aiohttp==3.13.2

# 数据处理
pydantic[email]==2.11.9
numpy>=1.26.0,<2  # mediapipe 要求 numpy<2
PyYAML==6.0.2
python-dotenv==1.1.1

# gRPC（降级版本以兼容 mediapipe 和 protobuf 4.x）
grpcio==1.60.0
grpcio-tools==1.60.0
protobuf>=4.25.3,<5  # mediapipe 要求 protobuf<5

# 八字计算
lunar_python==1.4.7
zhdate==0.1
pytz>=2024.1  # 时区转换和夏令时处理

# 工具
click==8.1.8
orjson==3.11.3
psutil==7.1.3
tqdm==4.67.1
PyJWT>=2.8.0
cryptography>=41.0.0
pillow>=10.0.0
python-docx>=1.2.0  # API文档生成工具
watchdog>=3.0.0  # 文件监控（用于自动化热更新）

# AI/LLM（如需要）
# openai==2.7.1
# langchain==0.3.27
# langchain-openai==1.0.2

# 支付（如需要）
stripe>=7.0.0
alipay-sdk-python>=3.7.0

# 图像处理（面相/手相/风水分析必需）
opencv-python-headless>=4.8.0
mediapipe>=0.10.14,<0.10.19  # 支持 protobuf 4.x 且 numpy<2 的版本
scikit-learn>=1.3.0
scipy>=1.11.0

# 微信支付
wechatpy>=1.8.0

# === 测试工具 ===
pytest==7.4.3
pytest-asyncio==0.21.1
pytest-cov==4.1.0
pytest-mock==3.12.0
pytest-timeout==2.2.0

# === 代码质量检查工具 ===
pylint==3.0.3
black==23.12.1
mypy==1.7.1
flake8==6.1.0
isort==5.13.2

# === 以下是重型依赖，暂不启用 ===
# 深度学习（非常大，约2GB，需要时再启用）
# torch>=2.4.0
# torchvision>=0.19.0
# dlib>=19.24.0
# face-recognition>=1.3.0

# === 百炼平台（阿里云通义千问）===
dashscope>=1.14.0
