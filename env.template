# HiFate-bazi 环境变量配置模板
# 复制此文件为 .env 并修改相应的配置值
# 命令：cp env.template .env

# ============================================
# MySQL 数据库配置
# ============================================
MYSQL_ROOT_PASSWORD=your_strong_password_here
MYSQL_USER=root
MYSQL_DATABASE=bazi_system

# ============================================
# Redis 缓存配置
# ============================================
REDIS_PASSWORD=your_redis_password_here

# ============================================
# 应用配置
# ============================================
APP_ENV=production
DEBUG=False
SECRET_KEY=your_secret_key_here_change_me
WEB_PORT=8001

# ============================================
# 时区配置
# ============================================
TZ=Asia/Shanghai

# ============================================
# gRPC 微服务地址（Docker 内部使用服务名）
# ============================================
BAZI_CORE_SERVICE_URL=bazi-core:9001
BAZI_FORTUNE_SERVICE_URL=bazi-fortune:9002
BAZI_ANALYZER_SERVICE_URL=bazi-analyzer:50051
BAZI_RULE_SERVICE_URL=rule-service:50053
FORTUNE_ANALYSIS_SERVICE_URL=fortune-analyzer:50052
FORTUNE_RULE_SERVICE_URL=fortune-rule:9007
PAYMENT_SERVICE_URL=payment-service:9006
INTENT_SERVICE_URL=intent-service:9008
PROMPT_OPTIMIZER_SERVICE_URL=prompt-optimizer:9009
AUTH_SERVICE_URL=auth-service:9011

# ============================================
# Coze API 配置（可选）
# ============================================
COZE_ACCESS_TOKEN=your_coze_access_token
COZE_BOT_ID=your_coze_bot_id
INTENT_BOT_ID=your_intent_bot_id
FORTUNE_ANALYSIS_BOT_ID=your_fortune_analysis_bot_id

# ============================================
# Prompt 版本管理（可选）
# ============================================
PROMPT_VERSION=v1.0
PROMPT_CACHE_TTL=3600

# ============================================
# Stripe 支付配置（可选）
# ============================================
STRIPE_SECRET_KEY=your_stripe_secret_key
FRONTEND_BASE_URL=https://your-domain.com

# ============================================
# OAuth 2.0 认证配置
# ============================================
# OAuth 客户端凭证
OAUTH_CLIENT_ID=hifate_client
OAUTH_CLIENT_SECRET=hifate_secret_change_me

# Token 过期时间配置
OAUTH_AUTHORIZATION_CODE_EXPIRE_MINUTES=10  # 授权码过期时间（分钟）
OAUTH_ACCESS_TOKEN_EXPIRE_MINUTES=60  # Access Token 过期时间（分钟）
OAUTH_REFRESH_TOKEN_EXPIRE_DAYS=30  # Refresh Token 过期时间（天）

# Redis 配置（认证服务使用）
REDIS_DB=0  # Redis 数据库编号（默认 0）

# ============================================
# 阿里云容器镜像服务 (ACR) 配置（推荐）
# ============================================
# 配置 ACR 后，部署时将自动从 ACR 拉取镜像，避免本地构建占用磁盘空间
# ACR_REGISTRY=registry.cn-hangzhou.aliyuncs.com
# ACR_NAMESPACE=your-namespace
# ACR_USERNAME=your-username
# ACR_PASSWORD=your-password
# IMAGE_TAG=master  # 镜像标签，默认为 master

# ============================================
# GitHub Container Registry (GHCR) 配置（备选）
# ============================================
# 如果未配置 ACR，可以配置 GHCR 作为备选
# GITHUB_TOKEN=your_github_token
# GITHUB_ACTOR=your_github_username

# ============================================
# 注意事项
# ============================================
# 1. 生产环境必须修改所有密码和密钥
# 2. SECRET_KEY 应该是一个随机生成的字符串
# 3. MYSQL_ROOT_PASSWORD 应该是强密码
# 4. 保存此文件后，运行 chmod 600 .env 保护敏感信息
# 5. 推荐配置 ACR，避免本地构建占用磁盘空间

