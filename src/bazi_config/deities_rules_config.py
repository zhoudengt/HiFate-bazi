#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
神煞规则配置文件
将神煞的影响规则从代码中分离出来，便于维护和管理
"""

DEITIES_RULES_CONFIG = {
    '天乙贵人': {
        'rules': [
            "一生人缘佳，遇事有人解救危难，化险为夷",
            "一生少病，人缘佳，易有社会地位",
            "很适合从事公关性质的工作",
            "无形之中会散发一种贵气，给人亲切好相处的感觉"
        ],
        'gender_specific': False
    },

    '天德贵人': {
        'rules': [
            "性格好，不犯刑律，不遇危难",
            "人心地善良，身体健康，人缘好",
            "在生平之中较不会遇到意外",
            "具有贵气的特质，行为处事坦白而无私，也有慈悲心或者同情心"
        ],
        'gender_specific': False
    },

    '月德贵人': {
        'rules': [
            "性格善良，行事光明磊落",
            "有贵人相助，逢凶化吉"
        ],
        'gender_specific': False
    },

    '禄神': {
        'rules': [
            "家运可能不太顺利，容易影响到置产、家人之间的关系",
            "在求财方面也较为困难",
            "记忆力强，勤劳致富，一生少闲",
            "性刚，容易得罪人",
            "在技术研究方面独具慧眼",
            "为异性多付出，予人有财有富之感",
            "一生重视钱财，有金钱观念",
            "精神力超强，企划技术能力强，个性稍见内向"
        ],
        'gender_specific': False
    },

    '驿马': {
        'rules': [
            "一生走动多、远行、会出远门",
            "即使是在一个地方，也经常会忙个不停",
            "闲不下来，经常总是把自己弄得很忙"
        ],
        'gender_specific': False
    },

    '太极贵人': {
        'rules': [
            "一生多得贵人相助，晚年可以幸福安逸",
            "聪明好学，有钻劲，喜文史哲宗教等科目",
            "为人正直，做事有始有终"
        ],
        'gender_specific': False
    },

    '将星': {
        'rules': [
            "能文能武，一生有权柄威信，具有组织领导能力",
            "会见掌权之机，给人不可侵犯的感觉",
            "很自然的散发出一种无形、难以言喻的权威感，让人望而生敬"
        ],
        'gender_specific': False
    },

    '学堂': {
        'rules': [
            "饱读诗书，记忆力很好",
            "行为举止无形间给人一种高贵气质的感觉",
            "高学历甚至达官显贵，很擅长读书"
        ],
        'gender_specific': False
    },

    '国印贵人': {
        'rules': [
            "诚实可靠，严守清规，照章行事，办事公道",
            "为人和悦，礼义仁慈，气质轩昂",
            "一生工作，生活环境多动"
        ],
        'gender_specific': False
    },

    '三奇贵人': {
        'rules': [
            "精神异常，襟怀卓越，好奇尚大，博学多能",
            "学艺专精、精力旺盛、脑力灵敏、机智灵巧",
            "易成专业技能人才，如工程师、信息家、计算机软件设计"
        ],
        'gender_specific': False
    },

    '文昌贵人': {
        'rules': [
            "心性聪明，出入近贵，气质文雅，好学新知",
            "一生可以近贵利官",
            "聪明有才华，文笔能力强"
        ],
        'gender_specific': False
    },

    '华盖': {
        'rules': [
            "有文学，音乐，设计方面的天赋，但性情较孤独",
            "具有敏感性质",
            "虽然聪明好学，但个性比较有孤僻现象",
            "常见血气方刚，不靠六亲",
            "一生可以自立更生，见解超群，才华有过人之处",
            "可谓气宇不凡，是一个有条件、有能力成就事业的人"
        ],
        'gender_specific': False
    },

    '天医': {
        'rules': [
            "与医学有缘，基本不生病",
            "特别适合从事医学、心理学、哲学",
            "学习力、理解力、观察力、模仿力、好奇心、研究心、直觉观等能力皆强"
        ],
        'gender_specific': False
    },

    '金舆': {
        'rules': {
            'male': [
                "能得异性之助，一生能得富贵",
                "得贤妻，享妻钱财，荣富显贵"
            ],
            'female': [
                "能得异性之助，一生能得富贵",
                "幸福安吉、骨肉安泰"
            ]
        },
        'gender_specific': True
    },

    '空亡': {
        'rules': [
            "事易差错，人多迷糊，缺乏主见",
            "多有无心之过错或是意外，一生常见四处奔走",
            "心难如愿，有很多人饱读诗书、胸怀大志，却徒劳英雄无用武之地",
            "总感觉好事不临，却是杂琐不如意事始终不离身",
            "一样的机会、一样的努力以赴，结果反而事与愿违，劳苦心力"
        ],
        'gender_specific': False,
        'pillar_specific': {
            'year': "家运可能不太顺利，与母亲缘薄",
            'month': "兄弟姐妹无靠",
            'hour': "多拗性"
        }
    },

    '劫煞': {
        'rules': [
            "家运可能不太顺利，难聚财，容易惹上法律纠纷",
            "事与愿违，主意外危难",
            "具有竞争心，肯求上进，做事有魄力，敢担当"
        ],
        'gender_specific': False
    },

    '亡神': {
        'rules': [
            "沉稳干练，谋略深算，严谨有威，好胜心强",
            "性情中存在着虚伪掩饰的成分",
            "家业容易不顺，影响置业和储蓄",
            "夫妻感情一般，多波折",
            "子女的健康或运势也容易出现问题",
            "自己也经常得罪人，很容易有法律纠纷出现",
            "做起事来总感觉无精打采，一生难免争纷",
            "容易涉足酒色场所",
            "不管男命还是女命，夫妻间都容易争吵，子女也会有不省心的情况发生"
        ],
        'gender_specific': False
    },

    '羊刃': {
        'rules': [
            "好胜心强、性格倔强、刚烈、勇猛、有担当",
            "做事情急躁"
        ],
        'gender_specific': False
    },

    '桃花': {
        'rules': [
            "非常有魅力、社交缘比较好、风流人物",
            "鉴赏能力、装饰能力比较独特",
            "命中有桃花整体会影响一个人的情感、魅力和恋爱、婚姻生活",
            "附带还有隐秘、阴暗",
            "命带桃花，其人性巧，有同情心，爱风流，多才艺，能艺术",
            "桃花并主聪明，异性缘佳"
        ],
        'gender_specific': True,
        'gender_rules': {
            'male': "男命八字中神煞有桃花，则慷慨好交游，喜美色",
            'female': "女人八字中有神煞桃花则风情万种，漂亮诱人"
        }
    },

    '咸池': {
        'rules': [
            "非常有魅力、社交缘比较好、风流人物",
            "鉴赏能力、装饰能力比较独特",
            "命中有桃花整体会影响一个人的情感、魅力和恋爱、婚姻生活",
            "附带还有隐秘、阴暗",
            "命带桃花，其人性巧，有同情心，爱风流，多才艺，能艺术",
            "桃花并主聪明，异性缘佳"
        ],
        'gender_specific': True,
        'gender_rules': {
            'male': "男命八字中神煞有桃花，则慷慨好交游，喜美色",
            'female': "女人八字中有神煞桃花则风情万种，漂亮诱人"
        }
    },

    '孤辰': {
        'rules': [
            "性格孤僻沉默不语、清心寡欲、依恋安逸",
            "生性多孤独，孤枕独眠"
        ],
        'gender_specific': True,
        'gender_rules': {
            'male': "男命逢孤辰，平生感情多波折"
        }
    },

    '寡宿': {
        'rules': [
            "异性缘浅薄，婚缘浅薄延后，夫缘浅薄，独身主义"
        ],
        'gender_specific': True,
        'gender_rules': {
            'female': "女命逢寡宿，姻缘不利"
        }
    },

    '阴阳差错': {
        'rules': [
            "可能会有同母异父或同父异母的兄弟姐妹",
            "在丧期中成婚、谈亲事时发生不愉快之事",
            "妻子与父母相处的不太融洽，和妻舅感情疏远",
            "做事阻碍较大，容易错失良机"
        ],
        'gender_specific': True,
        'gender_rules': {
            'male': "男命不太利于和妻子家的关系，不容易得到外家之助",
            'female': "女命不利于婆婆和妯娌姐妹间的亲情"
        }
    },

    '魁罡': {
        'rules': [
            "心性刚强霸气，聪明果断，攻击性，不服输，临事果断",
            "虽有领导才能，声宏气壮，且好权术，好胜心强，但婚姻较为不顺",
            "为人性格聪明，文章振发，临事果断，秉权好杀",
            "人生可能充满惊涛骇浪，命运起伏大，分化较明显，容易碰到不好的事情",
            "适合做法官、教授、艺术家、裁缝、理发业人士"
        ],
        'gender_specific': True,
        'gender_rules': {
            'female': "女命神煞中带魁罡，大多是美人胚子，但是在恋爱和婚姻方面感情较差"
        }
    },

    '孤鸾煞': {
        'rules': {
            'male': [
                "男命：婚姻中不太懂的相处，和妻子不和睦，可能会出现外遇事件"
            ],
            'female': [
                "女命：夫妻感情多一般，正缘来的晚，多为晚婚，注意健康问题",
                "女命带孤鸾与子女缘分薄",
                "孤鸾日生的女子不利姻缘，夫妻感情多波折，两人需要面对的问题较多",
                "房事不太和谐，注意外遇风波"
            ]
        },
        'gender_specific': True
    },

    '红艳煞': {
        'rules': [
            "此人不见得有多漂亮，但风流多情，好美色",
            "多数有外遇桃花，男女感情方面他把控的不太好，容易有纠纷"
        ],
        'gender_specific': True,
        'gender_rules': {
            'female': "女命有神煞红艳煞，难免私情，一谈恋爱可能就会陷入同居生活"
        }
    },

    '十恶大败': {
        'rules': [
            "不善理财，家运不太顺利",
            "多数不太会持家，花钱容易大手大脚，仓库金银化为尘",
            "没有资本很难成事",
            "可能会表示把父辈辛苦创建留下来的产业，自己给吃喝玩乐掉",
            "会影响到置产、钱财储蓄"
        ],
        'gender_specific': False
    },

    '金神': {
        'rules': [
            "个性刚毅，聪明多才，然人缘较差",
            "人命带之性多威猛强烈，胆大、好胜、常使人敬而远之"
        ],
        'gender_specific': False
    },

    '福星贵人': {
        'rules': [
            "平安福气，丰衣足食，人一生禄禄不缺，金玉满堂",
            "三餐温饱，无忧无虑",
            "不但能够遇事不为凶，甚至可以遇难呈祥，化险为夷",
            "一辈子享受悠闲的福气"
        ],
        'gender_specific': False
    },

    '德秀贵人': {
        'rules': {
            'male': [
                "人聪明晓事，温厚和气，文业通达",
                "遇事常人贵人相助，总能化险为夷",
                "男命德秀贵人多带正气，所以命主很可能多在公、检法或事业单位工作"
            ],
            'female': [
                "为人仁慈、敏慧、慈善、温顺、修养高",
                "一生有贵人相助，无险无虑，较为神佛帮助",
                "性格温和有相夫教子之美，主人仪容娟秀",
                "对工作和家庭都是和和美美"
            ]
        },
        'gender_specific': True
    }
}

# 神煞组合规则配置
DEITIES_COMBINATIONS_CONFIG = {
    '劫煞与天乙贵人/太极贵人': {
        'condition': lambda all_deities: '劫煞' in all_deities and ('天乙贵人' in all_deities or '太极贵人' in all_deities),
        'rule': "谋事有成，有才能和智谋"
    },

    '劫煞与羊刃': {
        'condition': lambda all_deities: '劫煞' in all_deities and '羊刃' in all_deities,
        'rule': "小心意外危险"
    },

    '羊刃+血刃+驿马': {
        'condition': lambda all_deities: '羊刃' in all_deities and '血刃' in all_deities and '驿马' in all_deities,
        'rule': "人身意外、多惊多险、交通意外事故"
    },

    '桃花与禄神': {
        'condition': lambda all_deities: ('桃花' in all_deities or '咸池' in all_deities) and '禄神' in all_deities,
        'rule': "有异性缘"
    },

    '桃花与禄神(男命)': {
        'condition': lambda all_deities, gender: ('桃花' in all_deities or '咸池' in all_deities) and '禄神' in all_deities and gender == 'male',
        'rule': "一生多有女贵人，多见帮助，能得桃花之助力",
        'gender_specific': True
    },

    '桃花与羊刃': {
        'condition': lambda all_deities: ('桃花' in all_deities or '咸池' in all_deities) and '羊刃' in all_deities,
        'rule': "感情风波，是非多灾"
    },

    '桃花与空亡': {
        'condition': lambda all_deities: ('桃花' in all_deities or '咸池' in all_deities) and '空亡' in all_deities,
        'rule': "人缘有欠缺之忧，一生为情多苦，一生中不易犯桃花"
    },

    '孤寡与驿马': {
        'condition': lambda all_deities: ('孤辰' in all_deities or '寡宿' in all_deities) and '驿马' in all_deities,
        'rule': "流浪他乡"
    },

    '孤寡与华盖': {
        'condition': lambda all_deities: ('孤辰' in all_deities or '寡宿' in all_deities) and '华盖' in all_deities,
        'rule': "恋情较晚，或为僧尼"
    },

    '孤寡与空亡': {
        'condition': lambda all_deities: ('孤辰' in all_deities or '寡宿' in all_deities) and '空亡' in all_deities,
        'rule': "小的时候能依靠的人较少，一生不太平稳，四处奔走"
    }
}