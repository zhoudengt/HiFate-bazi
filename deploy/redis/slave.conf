# Redis 从库配置
bind 0.0.0.0
port 6379

# 密码
# requirepass YOUR_REDIS_PASSWORD

# 主库连接（部署时替换 NODE1_IP）
replicaof NODE1_IP 6379
# masterauth YOUR_REDIS_PASSWORD  # 如果主库设置了密码

# 从库只读
replica-read-only yes

# 持久化 - AOF
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# 持久化 - RDB
save 900 1
save 300 10
save 60 10000

# 内存限制（容器限制350MB，设置300MB以留出缓冲）
maxmemory 300mb
maxmemory-policy allkeys-lru

# 日志
loglevel notice

# 客户端连接
maxclients 10000
timeout 0
tcp-keepalive 300
