# Redis 主库配置
bind 0.0.0.0
port 6379

# 密码（生产环境必须设置）
# requirepass YOUR_REDIS_PASSWORD

# 持久化 - AOF
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# 持久化 - RDB
save 900 1
save 300 10
save 60 10000

# 内存限制（容器限制350MB，设置300MB以留出缓冲）
maxmemory 300mb
maxmemory-policy allkeys-lru

# 日志
loglevel notice

# 客户端连接
maxclients 10000
timeout 0
tcp-keepalive 300

# 复制相关
# 作为主库，允许从库连接
# masterauth YOUR_REDIS_PASSWORD  # 如果设置了密码
