## 📋 PR 描述

### 变更类型
- [ ] 新功能
- [ ] Bug 修复
- [ ] 性能优化
- [ ] 重构
- [ ] 文档更新
- [ ] 配置变更
- [ ] 依赖更新

### 变更说明
<!-- 简要描述本次 PR 的变更内容 -->

### 相关 Issue
<!-- 关联的 Issue 编号，如 #123 -->

---

## ✅ 代码审查检查清单（必须全部通过）

### 🔴 核心检查项（必须通过）

#### 1. 开发规范符合性
- [ ] **已阅读并理解相关开发规范章节**（`.cursorrules`）
- [ ] **代码符合 `.cursorrules` 中的规范要求**
- [ ] **已运行开发规范检查清单**
- [ ] **无硬编码路径**（使用动态路径）
- [ ] **文件操作有异常处理**（不影响业务）

#### 2. 安全漏洞检查
- [ ] **已检查 SQL 注入风险**（使用参数化查询，无字符串拼接）
- [ ] **已检查 XSS 风险**（输出转义，无直接 innerHTML）
- [ ] **已检查敏感信息泄露**（无硬编码密码/密钥/API Key）
- [ ] **已检查权限控制**（如需要）
- [ ] **已检查文件上传安全**（如涉及）

#### 3. 热更新支持
- [ ] **代码支持热更新**（无模块级全局状态初始化）
- [ ] **单例类提供 `reset()` 方法**（如需要）
- [ ] **缓存支持清理**（如需要）
- [ ] **配置支持热加载**（如需要）

#### 4. 编码方式正确性
- [ ] **数据插入使用 UNHEX**（包含中文字符的数据）
- [ ] **数据查询使用 BINARY 比较**（中文字段查询）
- [ ] **数据同步脚本验证编码正确性**（如涉及）

#### 5. gRPC 端点注册
- [ ] **已注册 gRPC 端点**（在 `server/api/grpc_gateway.py` 中）
- [ ] **使用 `@_register` 装饰器注册**
- [ ] **已转换为 Pydantic 模型后再调用**

#### 6. 测试覆盖
- [ ] **已编写单元测试**（如需要）
- [ ] **已编写集成测试**（如需要）
- [ ] **已编写 API 测试**（如需要）
- [ ] **测试覆盖率 ≥ 50%**（核心模块 ≥ 70%）
- [ ] **所有测试通过**

---

### 📋 其他检查项

#### 代码质量检查
- [ ] 代码格式检查通过（Black、isort）
- [ ] 代码质量检查通过（pylint）
- [ ] 类型检查通过（mypy）
- [ ] 代码可读性和可维护性良好
- [ ] 无重复代码
- [ ] 无未使用的代码

#### 性能检查
- [ ] 已考虑性能影响
- [ ] 已添加性能监控（如需要，使用 `PerformanceMonitor`）
- [ ] 已优化数据库查询（使用索引，避免 N+1）
- [ ] 已考虑缓存策略（如需要）

#### 架构设计检查
- [ ] 遵循 gRPC 优先原则（服务间交互使用 gRPC）
- [ ] 遵循零停机原则（支持热更新）
- [ ] 考虑了负载均衡和故障转移（如需要）

#### 容器部署检查（如涉及容器）
- [ ] 所有微服务容器挂载 proto 目录（必须！）
- [ ] 所有微服务容器挂载 services 和 src 目录
- [ ] 容器启动使用 --env-file 传递环境变量
- [ ] 环境变量正确传递到容器内

#### 数据库变更检查（如涉及数据库）
- [ ] 数据库变更已检测（运行 `detect_db_changes.py`）
- [ ] 同步脚本已生成
- [ ] 回滚脚本已生成
- [ ] 同步脚本已预览（--dry-run 模式）

#### 文档检查
- [ ] 已更新 API 文档（如需要）
- [ ] 已更新架构文档（如需要）
- [ ] 已更新部署文档（如需要）
- [ ] 已添加代码注释

---

## 🧪 测试说明

### 测试环境
<!-- 描述测试环境配置 -->

### 测试步骤
<!-- 描述如何测试本次变更 -->

### 测试结果
<!-- 描述测试结果 -->

### 测试覆盖率
<!-- 测试覆盖率报告 -->

---

## 📸 截图（如需要）
<!-- 如果是 UI 变更，请提供截图 -->

---

## 📝 备注
<!-- 其他需要说明的内容 -->

---

## 🔍 自动审查结果

<!-- 以下内容将由 CI/CD 自动填充 -->

### 代码审查检查结果
- [ ] 开发规范符合性检查通过
- [ ] 安全漏洞检查通过
- [ ] 热更新支持检查通过
- [ ] 编码方式检查通过
- [ ] gRPC 端点注册检查通过
- [ ] 测试覆盖检查通过

### CI/CD 检查结果
- [ ] 代码质量检查通过
- [ ] 单元测试通过
- [ ] 集成测试通过
- [ ] 测试覆盖率 ≥ 50%

---

**⚠️ 重要提示**：所有核心检查项必须全部通过才能合并代码！

